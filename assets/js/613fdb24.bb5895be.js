"use strict";(self.webpackChunkeverscale_docs_website=self.webpackChunkeverscale_docs_website||[]).push([[2129],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return f}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var r=n.createContext({}),d=function(e){var t=n.useContext(r),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(r.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(a),f=l,m=u["".concat(r,".").concat(f)]||u[f]||p[f]||o;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function f(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,i=new Array(o);i[0]=u;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:l,i[1]=s;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},8354:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return r},default:function(){return f},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return p}});var n=a(3117),l=a(102),o=(a(7294),a(3905)),i=["components"],s={sidebar_position:3},r="Multisignature Wallet",d={unversionedId:"develop/smart-contract/multisignature-wallet",id:"develop/smart-contract/multisignature-wallet",title:"Multisignature Wallet",description:"SafeMultisigWallet - formally verified multisignature wallet. Compiled by TON Solidity Compiler (v 0.21 commit 1657b4f3541f19f3d23f87ac32800efe714bccc7).",source:"@site/../../src/develop/smart-contract/multisignature-wallet.md",sourceDirName:"develop/smart-contract",slug:"/develop/smart-contract/multisignature-wallet",permalink:"/develop/smart-contract/multisignature-wallet",draft:!1,editUrl:"https://github.com/everscale-org/docs/edit/main/.build/website/../../src/develop/smart-contract/multisignature-wallet.md",tags:[],version:"current",lastUpdatedAt:1658794573,formattedLastUpdatedAt:"Jul 26, 2022",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Samples",permalink:"/develop/smart-contract/debots/samples"},next:{title:"Frontend App",permalink:"/develop/smart-contract/frontend-app"}},c={},p=[{value:"Glossary",id:"glossary",level:2},{value:"2.1. Install TONOS-CLI utility",id:"21-install-tonos-cli-utility",level:2},{value:"Install compiled executable",id:"install-compiled-executable",level:3},{value:"Install through TONDEV",id:"install-through-tondev",level:3},{value:"Build from source",id:"build-from-source",level:3},{value:"Tails OS secure environment",id:"tails-os-secure-environment",level:3},{value:"A note on Windows syntax",id:"a-note-on-windows-syntax",level:3},{value:"2.2. Download contract files",id:"22-download-contract-files",level:2},{value:"2.3. Configure TONOS-CLI environment",id:"23-configure-tonos-cli-environment",level:2},{value:"3.1. Create seed phrases and public keys for all custodians",id:"31-create-seed-phrases-and-public-keys-for-all-custodians",level:2},{value:"3.1.1. Create wallet seed phrase",id:"311-create-wallet-seed-phrase",level:3},{value:"3.3. Generate wallet address",id:"33-generate-wallet-address",level:2},{value:"3.4. Send tokens to the new address from another wallet",id:"34-send-tokens-to-the-new-address-from-another-wallet",level:2},{value:"3.5. Deploy wallet (set custodians)",id:"35-deploy-wallet-set-custodians",level:2},{value:"3.5.1. Deploy the wallet to blockchain",id:"351-deploy-the-wallet-to-blockchain",level:3},{value:"3.5.3. Request the list of custodian public keys from the blockchain",id:"353-request-the-list-of-custodian-public-keys-from-the-blockchain",level:3},{value:"4.1. Select blockchain network",id:"41-select-blockchain-network",level:2},{value:"4.2. Convert tokens to nanotokens",id:"42-convert-tokens-to-nanotokens",level:2},{value:"4.3. Check wallet balance and status",id:"43-check-wallet-balance-and-status",level:2},{value:"4.3.1. Check wallet balance and status with TONOS-CLI",id:"431-check-wallet-balance-and-status-with-tonos-cli",level:3},{value:"4.3.2. Check wallet balance and status in the blockchain explorer",id:"432-check-wallet-balance-and-status-in-the-blockchain-explorer",level:3},{value:"4.4. List custodian public keys",id:"44-list-custodian-public-keys",level:2},{value:"4.5. List transactions awaiting confirmation",id:"45-list-transactions-awaiting-confirmation",level:2},{value:"4.6. Create transaction online",id:"46-create-transaction-online",level:2},{value:"4.6.1. Alternative command to create transaction online",id:"461-alternative-command-to-create-transaction-online",level:3},{value:"4.7. Create transaction confirmation online",id:"47-create-transaction-confirmation-online",level:2},{value:"4.8. Create new transaction offline",id:"48-create-new-transaction-offline",level:2},{value:"4.9. Create transaction confirmation offline",id:"49-create-transaction-confirmation-offline",level:2},{value:"4.10. Generate deploy message offline",id:"410-generate-deploy-message-offline",level:2},{value:"4.11. Broadcast previously generated message",id:"411-broadcast-previously-generated-message",level:2}],u={toc:p};function f(e){var t=e.components,a=(0,l.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"multisignature-wallet"},"Multisignature Wallet"),(0,o.kt)("p",null,"SafeMultisigWallet - formally verified multisignature wallet. Compiled by ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/TON-Solidity-Compiler"},"TON Solidity Compiler")," (v 0.21 commit 1657b4f3541f19f3d23f87ac32800efe714bccc7)."),(0,o.kt)("p",null,"Multisignature wallet is a crypto wallet on the blockchain, which supports multiple owners (custodians), who are authorized to manage the wallet."),(0,o.kt)("p",null,"You can use the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli"},"TONOS-CLI")," utility to deploy multisignature wallets and manage them."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"EverX Multisignature Wallet repository ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"},"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig"))),(0,o.kt)("h1",{id:"table-of-contents"},"Table of Contents"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#1-introduction"},"1. Introduction"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#glossary"},"Glossary")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#2-install-tonos-cli"},"2. Install TONOS-CLI"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#21-install-tonos-cli-utility"},"2.1. Install TONOS-CLI utility"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#install-compiled-executable"},"Install compiled executable")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#install-through-tondev"},"Install through TONDEV")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#build-from-source"},"Build from source")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#tails-os-secure-environment"},"Tails OS secure environment")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#a-note-on-windows-syntax"},"A note on Windows syntax")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#22-download-contract-files"},"2.2. Download contract files")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#23-configure-tonos-cli-environment"},"2.3. Configure TONOS-CLI environment")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#3-create-wallet"},"3. Create Wallet"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#31-create-seed-phrases-and-public-keys-for-all-custodians"},"3.1. Create seed phrases and public keys for all custodians"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#311-create-wallet-seed-phrase"},"3.1.1. Create wallet seed phrase")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#312-generate-public-key"},"3.1.2. Generate public key")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#32-generate-deployment-key-pair-file"},"3.2. Generate deployment key pair file")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#33-generate-wallet-address"},"3.3. Generate wallet address")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#34-send-tokens-to-the-new-address-from-another-wallet"},"3.4. Send tokens to the new address from another wallet")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#35-deploy-wallet-set-custodians"},"3.5. Deploy wallet (set custodians)"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#351-deploy-the-wallet-to-blockchain"},"3.5.1. Deploy the wallet to blockchain")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#352-check-that-the-wallet-is-active"},"3.5.2. Check that the wallet is active")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#353-request-the-list-of-custodian-public-keys-from-the-blockchain"},"3.5.3. Request the list of custodian public keys from the blockchain")))))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#4-manage-wallet"},"4. Manage Wallet"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#41-select-blockchain-network"},"4.1. Select blockchain network")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#42-convert-tokens-to-nanotokens"},"4.2. Convert tokens to nanotokens")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#43-check-wallet-balance-and-status"},"4.3. Check wallet balance and status"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#431-check-wallet-balance-and-status-with-tonos-cli"},"4.3.1. Check wallet balance and status with TONOS-CLI")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#432-check-wallet-balance-and-status-in-the-blockchain-explorer"},"4.3.2. Check wallet balance and status in the blockchain explorer")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#44-list-custodian-public-keys"},"4.4. List custodian public keys")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#45-list-transactions-awaiting-confirmation"},"4.5. List transactions awaiting confirmation")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#46-create-transaction-online"},"4.6. Create transaction online"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#461-alternative-command-to-create-transaction-online"},"4.6.1. Alternative command to create transaction online")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#47-create-transaction-confirmation-online"},"4.7. Create transaction confirmation online"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#471-alternative-command-to-confirm-transaction-online"},"4.7.1. Alternative command to confirm transaction online")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#48-create-new-transaction-offline"},"4.8. Create new transaction offline")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#49-create-transaction-confirmation-offline"},"4.9. Create transaction confirmation offline")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#410-generate-deploy-message-offline"},"4.10. Generate deploy message offline")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#411-broadcast-previously-generated-message"},"4.11. Broadcast previously generated message")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#5-error-codes"},"5. Error codes"))),(0,o.kt)("h1",{id:"1-introduction"},"1. Introduction"),(0,o.kt)("p",null,"Multisignature wallets are implemented as decentralized smart contracts. All wallet data is stored on the blockchain. "),(0,o.kt)("p",null,"Multisignature wallets can have up to 32 custodians."),(0,o.kt)("p",null,"By default they can queue up to 5 transactions from each single custodian to be confirmed by other custodians."),(0,o.kt)("p",null,"Default transaction lifetime is 1 hour."),(0,o.kt)("p",null,"Minimal amount that can be transferred is 0.001 tokens (1000000 nanotokens)."),(0,o.kt)("h2",{id:"glossary"},"Glossary"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Multisignature wallet")," - crypto wallet on the blockchain, which supports multiple owners (custodians), who are authorized to manage the wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Wallet address")," - unique address of the wallet on the blockchain. It explicitly identifies the wallet and is required for any actions with the wallet to be performed. It does not, on its own, provide anyone access to wallet funds."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Wallet custodian")," - authorized owner of the wallet. Owns the private key and corresponding seed phrase, which are required to make any changes to the wallet or wallet funds. Wallet may have more than one custodian."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Custodian private key")," - the unique cryptographic key belonging to the wallet custodian, which authorizes access to the wallet. Should be kept secret."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Custodian seed phrase")," - unique mnemonic phrase exactly corresponding to the custodian private key. Can be used to restore the private key, or to sign transactions in TONOS-CLI instead of it. Should be kept secret and securely backed up."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Custodian public key")," - public key forming a cryptographic key pair with the custodian private key. It is not secret and may be freely shared with anyone."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Validator")," - the entity performing validation of new blocks on the blockchain through a Proof-of-Stake system. Requires a multisignature wallet for staking."),(0,o.kt)("h1",{id:"2-install-tonos-cli"},"2. Install TONOS-CLI"),(0,o.kt)("h2",{id:"21-install-tonos-cli-utility"},"2.1. Install TONOS-CLI utility"),(0,o.kt)("h3",{id:"install-compiled-executable"},"Install compiled executable"),(0,o.kt)("p",null,"Create a folder. Download the ",(0,o.kt)("inlineCode",{parentName:"p"},".zip")," file from the latest release from here: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli/releases"},"https://github.com/tonlabs/tonos-cli/releases")," to this folder. Extract it."),(0,o.kt)("h3",{id:"install-through-tondev"},"Install through TONDEV"),(0,o.kt)("p",null,"You can use ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tondev"},"TONDEV")," to install the latest version of TONOS-CLI."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tondev tonos-cli install\n")),(0,o.kt)("p",null,"The installer requires ",(0,o.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"},"NPM")," to be installed, so it can install packages globally without using sudo. In case of error, manually set environment variable ",(0,o.kt)("inlineCode",{parentName:"p"},"PATH=$PATH:$HOME./tondev/solidity")),(0,o.kt)("p",null,"This command updates TONOS-CLI installed through TONDEV to the latest version:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tondev tonos-cli update\n")),(0,o.kt)("p",null,"This command specifies TONOS-CLI version to use and downloads it if needed:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tondev tonos-cli set --version 0.8.0\n")),(0,o.kt)("h3",{id:"build-from-source"},"Build from source"),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli#build-from-source"},"TONOS-CLI readme")," for build from source procedure."),(0,o.kt)("h3",{id:"tails-os-secure-environment"},"Tails OS secure environment"),(0,o.kt)("p",null,"For maximum security while working with offline TONOS-CLI features (such as cryptographic commands or encrypted message generation), you can use the ",(0,o.kt)("a",{parentName:"p",href:"https://tails.boum.org/"},"Tails OS"),"."),(0,o.kt)("p",null,"You can perform the following actions entirely offline:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Generate ",(0,o.kt)("a",{parentName:"li",href:"#31-create-seed-phrases-and-public-keys-for-all-custodians"},"seed phrases and custodian keys")),(0,o.kt)("li",{parentName:"ul"},"Pepare ",(0,o.kt)("a",{parentName:"li",href:"#411-broadcast-previously-generated-message"},"deployment message")," offline"),(0,o.kt)("li",{parentName:"ul"},"Prepare ",(0,o.kt)("a",{parentName:"li",href:"#48-create-new-transaction-offline"},"new transaction")," offline"),(0,o.kt)("li",{parentName:"ul"},"Prepare ",(0,o.kt)("a",{parentName:"li",href:"#49-create-transaction-confirmation-offline"},"transaction confirmation")," offline")),(0,o.kt)("h3",{id:"a-note-on-windows-syntax"},"A note on Windows syntax"),(0,o.kt)("p",null,"When using Windows command line, the following syntax should be used for all TONOS-CLI commands:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Never use the ",(0,o.kt)("inlineCode",{parentName:"li"},"./")," symbols before ",(0,o.kt)("inlineCode",{parentName:"li"},"tonos-cli"),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> tonos-cli <command_name> <options>\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"For all commands with nested quotes, the outer single quotes should be changed to double quotes, and the inner double quotes should be shielded by a preceding ",(0,o.kt)("inlineCode",{parentName:"li"},"\\"),".\nExample:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'> tonos-cli deploy SafeMultisigWallet.tvc "{\\"owners\\":[\\"0x723b2f0fa217cd10fe21326634e66106678f15d5a584babe4f576dffe9dcbb1b\\",\\"0x127e3ca223ad429ddaa053a39fecd21131df173bb459a4438592493245b695a3\\",\\"0xc2dd3682ffa9df97a968bef90b63da90fc92b22163f558b63cb7e52bfcd51bbb\\"],\\"reqConfirms\\":2}" --abi SafeMultisigWallet.abi.json --sign deploy.keys.json\n')),(0,o.kt)("h2",{id:"22-download-contract-files"},"2.2. Download contract files"),(0,o.kt)("p",null,"Download compiled ",(0,o.kt)("inlineCode",{parentName:"p"},".abi.json")," and ",(0,o.kt)("inlineCode",{parentName:"p"},".tvc")," multisignature contract files from ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity"},"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity")),(0,o.kt)("p",null,"Choose a contract version:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SafeMultisig")," - basic multisignature wallet, does not permit contract code modification. Is required if you use validator scripts.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," direct link:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/tonlabs/ton-labs-contracts/master/solidity/safemultisig/SafeMultisigWallet.abi.json"},"https://raw.githubusercontent.com/tonlabs/ton-labs-contracts/master/solidity/safemultisig/SafeMultisigWallet.abi.json")),(0,o.kt)("p",null," ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.tvc")," direct link:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/raw/master/solidity/safemultisig/SafeMultisigWallet.tvc"},"https://github.com/tonlabs/ton-labs-contracts/raw/master/solidity/safemultisig/SafeMultisigWallet.tvc")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SetcodeMultisig")," - more advanced multisignature wallet.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," direct link:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/tonlabs/ton-labs-contracts/master/solidity/setcodemultisig/SetcodeMultisigWallet.abi.json"},"https://raw.githubusercontent.com/tonlabs/ton-labs-contracts/master/solidity/setcodemultisig/SetcodeMultisigWallet.abi.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.tvc")," direct link:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/raw/master/solidity/setcodemultisig/SetcodeMultisigWallet.tvc"},"https://github.com/tonlabs/ton-labs-contracts/raw/master/solidity/setcodemultisig/SetcodeMultisigWallet.tvc")),(0,o.kt)("p",null,"Place both files into the folder containing the ",(0,o.kt)("inlineCode",{parentName:"p"},"tonos-cli")," executable."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Make sure you have downloaded the ",(0,o.kt)("strong",{parentName:"p"},"raw")," versions of the files. A common error when downloading from the github project page manually is to save the redirection page instead of the raw file.\n",(0,o.kt)("strong",{parentName:"p"},"Note"),": ",(0,o.kt)("a",{parentName:"p",href:"https://ton.surf/"},"TON Surf")," uses a specialized version of the SetcodeMultisig contract. It will not be possible to manage a standard Setcode wallet in TON Surf.")),(0,o.kt)("h2",{id:"23-configure-tonos-cli-environment"},"2.3. Configure TONOS-CLI environment"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"(Optional, Linux/Mac OS, if you didn't install through tondev) Put ",(0,o.kt)("inlineCode",{parentName:"li"},"tonos-cli")," into system environment:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'export PATH="<tonos_folder_path>:$PATH"\n')),(0,o.kt)("p",null,"If you skip this step and didn't install through ",(0,o.kt)("a",{parentName:"p",href:"#install-through-tondev"},"tondev"),", make sure you run the utility from the utility folder: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"./tonos-cli <command> <options>\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Use the following command to set the network:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli config --url <https://network_url>\n")),(0,o.kt)("p",null,"Some of the frequently used networks:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://net.ton.dev")," - developer sandbox for testing."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://main.ton.dev")," - main Everscale network."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://rustnet.ton.dev")," - test network running on Rust nodes."),(0,o.kt)("p",null,"You need to do it only once before using the utility."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"tonos-cli.conf.json")," configuration file will be created in the current folder. The URL of the current network will be specified there. All subsequent calls of the utility will use this file to select the network to connect to."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": By default ",(0,o.kt)("inlineCode",{parentName:"p"},"tonos-cli")," connects to ",(0,o.kt)("inlineCode",{parentName:"p"},"net.ton.dev")," network.\n",(0,o.kt)("strong",{parentName:"p"},"Note"),": Always run ",(0,o.kt)("inlineCode",{parentName:"p"},"tonos-cli")," utility only from the folder where ",(0,o.kt)("inlineCode",{parentName:"p"},"tonos-cli.conf.json")," is placed, unless you have configured a different path for the file. Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli#24-override-configuration-file-location"},"TONOS-CLI document")," for additional information.\n3. Use the following command to check the set network:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"   tonos-cli config --list\n")),(0,o.kt)("p",null,"For additional configuration options, refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/tonos-cli#2-configuration"},"TONOS-CLI readme"),"."),(0,o.kt)("h1",{id:"3-create-wallet"},"3. Create Wallet"),(0,o.kt)("p",null,"The following actions should be performed to create a wallet:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create wallet seed phrase"),(0,o.kt)("li",{parentName:"ol"},"Generate deployment key pair file with wallet private/public keys based on the wallet seed phrase"),(0,o.kt)("li",{parentName:"ol"},"Generate wallet address based on the wallet seed phrase"),(0,o.kt)("li",{parentName:"ol"},"Send some tokens to the wallet address"),(0,o.kt)("li",{parentName:"ol"},"Deploy wallet (set custodians)")),(0,o.kt)("p",null,"All of these steps are detailed in this section."),(0,o.kt)("h2",{id:"31-create-seed-phrases-and-public-keys-for-all-custodians"},"3.1. Create seed phrases and public keys for all custodians"),(0,o.kt)("h3",{id:"311-create-wallet-seed-phrase"},"3.1.1. Create wallet seed phrase"),(0,o.kt)("p",null,"To generate your seed phrase enter the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli genphrase\n")),(0,o.kt)("p",null,"Terminal displays the generated seed phrase."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genphrase\nConfig: /home/user/tonos-cli.conf.json\nSucceeded.\nSeed phrase: "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Seed phrases should be created for every custodian of the multisignature wallet.\nThe seed phrase ensures access to the multisignature wallet. If lost, the custodian will no longer be able to manage the wallet. The seed phrase is unique for every custodian and should be kept secret and securely backed up (word order matters)."),(0,o.kt)("h3",{parentName:"blockquote",id:"312-generate-public-key"},"3.1.2. Generate public key")),(0,o.kt)("p",null,"To generate your public key enter the following command with your previously generated seed phrase in quotes:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli genpubkey "<seed_phrase>"\n')),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genpubkey "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\nConfig: /home/user/tonos-cli.conf.json\nSucceeded.\nPublic key: 88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340\n<QR code with key>                                         \n')),(0,o.kt)("p",null,"Copy the generated code from Terminal or scan the QR code containing the code with your phone and send it to whichever custodian is responsible for deploying the multisignature wallet."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": The public key should also be generated for every custodian. The public key is not secret and can be freely transmitted to anyone."),(0,o.kt)("h2",{parentName:"blockquote",id:"32-generate-deployment-key-pair-file"},"3.2. Generate deployment key pair file")),(0,o.kt)("p",null,"Any custodian who has received the public keys of all other custodians can deploy the multisignature wallet to the blockchain."),(0,o.kt)("p",null,"To create the key pair file from the seed phrase generated at step ",(0,o.kt)("strong",{parentName:"p"},"3.1.1")," use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli getkeypair <deploy.keys.json> "<seed_phrase>"\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<deploy.keys.json>")," - the file the key pair will be written to."),(0,o.kt)("p",null,"The utility generates the file that contains the key pair produced from seed phrase."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli getkeypair key.json "rule script joy unveil chaos replace fox recipe hedgehog heavy surge online"\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\nkey_file: key.json\n  phrase: rule script joy unveil chaos replace fox recipe hedgehog heavy surge online\nSucceeded.\n')),(0,o.kt)("h2",{id:"33-generate-wallet-address"},"3.3. Generate wallet address"),(0,o.kt)("p",null,"Use deployment key pair file to generate your address:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli genaddr <MultisigWallet.tvc> <MultisigWallet.abi.json> --setkey <deploy.keys.json> --wc <workchain_id>\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.tvc>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.tvc")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.tvc")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<deploy.keys.json>")," - the file the key pair is read from."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--wc <workchain_id>")," - (optional) ID of the workchain the wallet will be deployed to (",(0,o.kt)("inlineCode",{parentName:"p"},"-1")," for masterchain, ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," for basechain). By default this value is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Masterchain fees are significantly higher, but masterchain is required for direct staking validator wallets. Make sure to set workchain ID to ",(0,o.kt)("inlineCode",{parentName:"p"},"-1")," for any direct staking validator wallets you are deploying: ",(0,o.kt)("inlineCode",{parentName:"p"},"--wc -1"),". Basechain, on the other hand, is best suited for user wallets and validator wallets that are staking through a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/depool"},"DePool"),".\nThe utility displays the new multisignature wallet address (Raw_address).")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli genaddr --genkey key.json --wc -1 SafeMultisigWallet.tvc SafeMultisigWallet.abi.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n      wc: -1\n    keys: key.json\ninit_data: None\nis_update_tvc: None\nSeed phrase: "chimney nice diet engage hen sing vocal upgrade column address consider word"\nRaw address: -1:a021414a79539001ed35d615a646dc8b89df29ccccf143c30df15c7fbcaff086\ntestnet:\nNon-bounceable address (for init): 0f-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whkeM\nBounceable address (for later access): kf-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whhpJ\nmainnet:\nNon-bounceable address (for init): Uf-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whvwG\nBounceable address (for later access): Ef-gIUFKeVOQAe011hWmRtyLid8pzMzxQ8MN8Vx_vK_whqHD\nSucceeded\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": The wallet address is required for any interactions with the wallet. It should be shared with all wallet custodians.")),(0,o.kt)("h2",{id:"34-send-tokens-to-the-new-address-from-another-wallet"},"3.4. Send tokens to the new address from another wallet"),(0,o.kt)("p",null,"Use the following command to create a new transaction from another existing wallet:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <source_address> submitTransaction \'{"dest":"<raw_address>","value":<nanotokens>,"bounce":false,"allBalance":false,"payload":""}\' --abi <MultisigWallet.abi.json> --sign "<source_seed_or_keyfile>"\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<source_address>")," - address of the wallet the funds are sent from."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"dest":<raw_address>')," - new wallet address generated at step ",(0,o.kt)("strong",{parentName:"p"},"3.3"),". Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3"')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"value"'),": - amount of tokens to transfer in nanotokens (Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"value":10000000000')," sets up a transfer of 10 tokens)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"bounce"')," - use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," to transfer funds to a non-existing contract to create it."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"payload"'),' - use "" for simple transfer. Otherwise payload is used as a body of outbound internal message.'),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"allBalance"')," - used to transfer all funds in the wallet. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," for a simple transfer."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Due to a bug setting ",(0,o.kt)("inlineCode",{parentName:"p"},"allBalance")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," currently causes errors. Single-custodian multisig wallets may use ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction")," method with flag ",(0,o.kt)("inlineCode",{parentName:"p"},"130")," and value ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," instead:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <multisig_address> sendTransaction \'{"dest":"raw_address","value":0,"bounce":true,"flags":130,"payload":""}\' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile>\n')),(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),".")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"<source_seed_or_keyfile>"')," - seed phrase in quotes or path to keyfile of the source wallet."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli call 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc submitTransaction \'{"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\' --abi SetcodeMultisigWallet.abi.json --sign k1.keys.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":false,"allBalance":false,"payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nlifetime: None\n  output: None\nConnecting to net.ton.dev\nGenerating external inbound message...\nMessageId: c6baac843fefe6b9e8dc3609487a63ef21207e4fdde9ec253b9a47f7f5a88d01\nExpire at: Sat, 08 May 2021 14:52:23 +0300\nProcessing... \nSucceeded.\nResult: {\n  "transId": "6959885776551137793"\n}\n')),(0,o.kt)("p",null,"If the sponsoring wallet has multiple custodians, the transaction may require confirmation from its other custodians."),(0,o.kt)("p",null,"To confirm the transaction use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <source_address> confirmTransaction \'{"transactionId":"<id>"}\' --abi <MultisigWallet.abi.json> --sign "<source_seed_or_keyfile>"\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<source_address>")," - address of the wallet to funds are sent from."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"<source_seed_or_keyfile>"')," - seed phrase in quotes or path to keyfile of the source wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"transactionId")," \u2013 the ID of the transaction transferring tokens to the new  wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli call 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc confirmTransaction \'{"transactionId":"6981478983724354305"}\' --abi SetcodeMultisigWallet.abi.json --sign k2.keys.json\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: confirmTransaction\n  params: {"transactionId":"6981478983724354305"}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k2.keys.json\nlifetime: None\n  output: None\nConnecting to https://net.ton.dev\nGenerating external inbound message...\nMessageId: 322e1efffedf73c8009b84a103dd3fdc205796eb4d88a912fa13d931ce9e7c9c\nExpire at: Mon, 05 Jul 2021 19:28:08 +0300\nProcessing... \nSucceeded.\nResult: {}\n')),(0,o.kt)("p",null,"Ensure that the new wallet has been created in the blockchain and has ",(0,o.kt)("strong",{parentName:"p"},"Uninit")," status:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli account <multisig_address>\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<multisig_address>")," - new wallet address generated at step ",(0,o.kt)("strong",{parentName:"p"},"3.3"),"."),(0,o.kt)("h2",{id:"35-deploy-wallet-set-custodians"},"3.5. Deploy wallet (set custodians)"),(0,o.kt)("h3",{id:"351-deploy-the-wallet-to-blockchain"},"3.5.1. Deploy the wallet to blockchain"),(0,o.kt)("p",null,"Use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli deploy <MultisigWallet.tvc> \'{"owners":["0x...", ...],"reqConfirms":N}\' --abi <MultisigWallet.abi.json> --sign <deploy_seed_or_keyfile> --wc <workchain_id>\n')),(0,o.kt)("p",null,"Configuration parameters:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.tvc>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.tvc")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.tvc")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"owners")," - array of custodian public keys generated by all wallet custodians at step ",(0,o.kt)("strong",{parentName:"p"},"3.1.2")," as uint256 numbers. Make sure all public keys are enclosed in quotes and start with ",(0,o.kt)("inlineCode",{parentName:"p"},"0x....")," "),(0,o.kt)("p",null,"Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"owners":["0x8868adbf012ebc349ced852fdcf5b9d55d1873a68250fae1be609286ddb962582", "0xa0e16ccff0c7bf4f29422b33ec1c9187200e9bd949bb2dd4c7841f5009d50778a"]')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"reqConfirms")," - number of signatures needed to confirm a transaction ( 0 < ",(0,o.kt)("inlineCode",{parentName:"p"},"N")," \u2264 custodian count)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--wc <workchain_id>")," - (optional) ID of the workchain the wallet will be deployed to (",(0,o.kt)("inlineCode",{parentName:"p"},"-1")," for masterchain, ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," for basechain). By default this value is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Masterchain fees are significantly higher, but masterchain is required for validator wallets. Make sure to set workchain ID to ",(0,o.kt)("inlineCode",{parentName:"p"},"-1")," for any validator wallets you are deploying: ",(0,o.kt)("inlineCode",{parentName:"p"},"--wc -1"),". Basechain, on the other hand, is best suited for user wallets.\n",(0,o.kt)("inlineCode",{parentName:"p"},"<deploy_seed_or_keyfile>")," - can either be the seed phrase used in step ",(0,o.kt)("strong",{parentName:"p"},"3.2")," to generate the deployment key pair file or the ",(0,o.kt)("inlineCode",{parentName:"p"},"deploy.keys.json")," file itself. If seed phrase is used, enclose it in double quotes.")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--sign deploy.keys.json")),(0,o.kt)("p",null,"Deploying a wallet without at least one custodian is not possible, since every transaction from a wallet has to be signed by one or more custodians (depending on wallet configuration) with their private key or equivalent seed phrase. It is a basic security requirement of the system."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli deploy --sign key.json --wc -1 --abi SafeMultisigWallet.abi.json SafeMultisigWallet.tvc \'{"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\'\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n  params: {"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\n     abi: SafeMultisigWallet.abi.json\n    keys: key.json\n      wc: -1\nConnecting to net.ton.dev\nDeploying...\nTransaction succeeded.\nContract deployed at address: -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": After a SafeMultisig wallet is deployed, for reasons of security you cannot add or remove custodians from it. If you want to change the custodian list, you have to create a new wallet, transfer all funds there, and set the new list of custodians."),(0,o.kt)("h3",{parentName:"blockquote",id:"352-check-that-the-wallet-is-active"},"3.5.2. Check that the wallet is active")),(0,o.kt)("p",null,"Check the new wallet status again. Now it should be ",(0,o.kt)("strong",{parentName:"p"},"Active"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli account <multisig_address>\n")),(0,o.kt)("h3",{id:"353-request-the-list-of-custodian-public-keys-from-the-blockchain"},"3.5.3. Request the list of custodian public keys from the blockchain"),(0,o.kt)("p",null,"Verify that they match the keys you have loaded during deploy."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli run <multisig_address> getCustodians {} --abi SafeMultisigWallet.abi.json\n")),(0,o.kt)("p",null,"The wallet is deployed and the owners of the listed public keys have access to it."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli run 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc getCustodians {} --abi SetcodeMultisigWallet.abi.json\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: getCustodians\n  params: {}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: None\nlifetime: None\n  output: None\nConnecting to https://net.ton.dev\nGenerating external inbound message...\nMessageId: 6c3daeeea601ef6c81a516079a3cec2210fea278a06cc7bb118b4529f154e5d7\nExpire at: Mon, 05 Jul 2021 19:31:47 +0300\nRunning get-method...\nSucceeded.\nResult: {\n  "custodians": [\n    {\n      "index": "1",\n      "pubkey": "0x154bc7ed3088294e4e767e2e7183f43d62bcec820c58a30e2ec730f0bb8792a3"\n    },\n    {\n      "index": "4",\n      "pubkey": "0x18331765f53c6a50aa3a348fa4536e6f632798d81ff59281aae21d9b5f86a21c"\n    },\n    {\n      "index": "3",\n      "pubkey": "0x6ee6539d0d8a3800d7525922c25b64874e0645340f2b43a2cb277db458b42fa4"\n    },\n    {\n      "index": "0",\n      "pubkey": "0x849ee401fde65ad8cda6d937bdc81e2beba0f36ba2f87115f4a2d24a15568203"\n    },\n    {\n      "index": "2",\n      "pubkey": "0x9ef666feaacf1d65c78af3b1c099c5096aa2e26afc21346fd66b8e7d5d9d6224"\n    }\n  ]\n}\n')),(0,o.kt)("h1",{id:"4-manage-wallet"},"4. Manage Wallet"),(0,o.kt)("h2",{id:"41-select-blockchain-network"},"4.1. Select blockchain network"),(0,o.kt)("p",null,"There are two networks currently available:"),(0,o.kt)("p",null,"Some of the frequently used networks:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://net.ton.dev")," - developer sandbox for testing."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://main.ton.dev")," - main Everscale network."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://rustnet.ton.dev")," - test network running on Rust nodes."),(0,o.kt)("p",null,"Use the following command to switch to any of these networks:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli config --url <https://network_url>\n")),(0,o.kt)("p",null,"You need to do it only once before using the utility."),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},".json")," configuration file will be created in the current folder. The URL of the current network will be specified there. All subsequent calls of the utility will use this file to select the network to connect to."),(0,o.kt)("h2",{id:"42-convert-tokens-to-nanotokens"},"4.2. Convert tokens to nanotokens"),(0,o.kt)("p",null,"Amounts in  most multisig wallet commands are indicated in nanotokens. To convert tokens to nanotokens use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli convert tokens <amount>\n")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli convert tokens 125.8\nConfig: /home/user/tonos-cli.conf.json\n125800000000\n")),(0,o.kt)("h2",{id:"43-check-wallet-balance-and-status"},"4.3. Check wallet balance and status"),(0,o.kt)("h3",{id:"431-check-wallet-balance-and-status-with-tonos-cli"},"4.3.1. Check wallet balance and status with TONOS-CLI"),(0,o.kt)("p",null,"You may use the following command to check the current status and balance of your wallet:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli account <multisig_address>\n")),(0,o.kt)("p",null,"It displays the wallet status:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Not found")," \u2013 if the wallet does not exist"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Uninit")," \u2013 wallet was created, but contract code wasn\u2019t deployed"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Active")," \u2013 wallet exists and has the contract code and data")),(0,o.kt)("p",null,"It also displays the wallet balance, time of the most recent transaction, contract data block, data in boc format and code hash (which is unique for every contract type)."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ tonos-cli account 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\nConnecting to https://net.ton.dev\nProcessing...\nSucceeded.\nacc_type:      Active\nbalance:       236565978364 nanoton\nlast_paid:     1625502429\nlast_trans_lt: 0x9274fd9102\ndata(boc): b5ee9c7201020d010001b10003df849ee401fde65ad8cda6d937bdc81e2beba0f36ba2f87115f4a2d24a155682030000017a777eac3bc24f7200fef32d6c66d36c9bdee40f15f5d079b5d17c388afa5169250aab4101800000000000000000000000000000000000000000000000000000000000000082800000000182700c0a01020120050202016204030043bf3bd99bfaab3c75971e2bcec702671425aa8b89abf084d1bf59ae39f5767588900a0043bf127b9007f7996b63369b64def72078afae83cdae8be1c457d28b4928555a080c0202012007060044bfaee6539d0d8a3800d7525922c25b64874e0645340f2b43a2cb277db458b42fa40302016609080043bec198bb2fa9e3528551d1a47d229b737b193cc6c0ffac940d5710ecdafc3510e0240043beea5e3f6984414a7273b3f1738c1fa1eb15e7641062c5187176398785dc3c95180c01d7a030719912b7df6580b0719912b7df6580800000018201424f7200fef32d6c66d36c9bdee40f15f5d079b5d17c388afa5169250aab410180400255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f30000000000000000000000000df28e800003c0b0000000140\ncode_hash: e2b60b6b602c10ced7ea8ede4bdf96342c97570a3798066f3fb50a4b2b27a208\n")),(0,o.kt)("p",null,"SafeMultisig code hash is ",(0,o.kt)("inlineCode",{parentName:"p"},"80d6c47c4a25543c9b397b71716f3fae1e2c5d247174c52e2c19bd896442b105")),(0,o.kt)("p",null,"SetcodeMultisig code hash is ",(0,o.kt)("inlineCode",{parentName:"p"},"e2b60b6b602c10ced7ea8ede4bdf96342c97570a3798066f3fb50a4b2b27a208")),(0,o.kt)("h3",{id:"432-check-wallet-balance-and-status-in-the-blockchain-explorer"},"4.3.2. Check wallet balance and status in the blockchain explorer"),(0,o.kt)("p",null,"The detailed status of the account can also be viewed in the ",(0,o.kt)("a",{parentName:"p",href:"https://ton.live/main"},"ton.live")," blockchain explorer."),(0,o.kt)("p",null,"Select the network the wallet is deployed to and enter the ",(0,o.kt)("strong",{parentName:"p"},"raw address")," of the wallet into the main search field."),(0,o.kt)("p",null,"Account status, balance, message and transaction history for the account will be displayed."),(0,o.kt)("h2",{id:"44-list-custodian-public-keys"},"4.4. List custodian public keys"),(0,o.kt)("p",null,"The following command displays the list of public keys, the owners of which have rights to manage the wallet:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli run <multisig_address> getCustodians {} --abi <MultisigWallet.abi.json>\n")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli run 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc getCustodians {} --abi SetcodeMultisigWallet.abi.json\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: getCustodians\n  params: {}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: None\nlifetime: None\n  output: None\nConnecting to https://net.ton.dev\nGenerating external inbound message...\nMessageId: 6c3daeeea601ef6c81a516079a3cec2210fea278a06cc7bb118b4529f154e5d7\nExpire at: Mon, 05 Jul 2021 19:31:47 +0300\nRunning get-method...\nSucceeded.\nResult: {\n  "custodians": [\n    {\n      "index": "1",\n      "pubkey": "0x154bc7ed3088294e4e767e2e7183f43d62bcec820c58a30e2ec730f0bb8792a3"\n    },\n    {\n      "index": "4",\n      "pubkey": "0x18331765f53c6a50aa3a348fa4536e6f632798d81ff59281aae21d9b5f86a21c"\n    },\n    {\n      "index": "3",\n      "pubkey": "0x6ee6539d0d8a3800d7525922c25b64874e0645340f2b43a2cb277db458b42fa4"\n    },\n    {\n      "index": "0",\n      "pubkey": "0x849ee401fde65ad8cda6d937bdc81e2beba0f36ba2f87115f4a2d24a15568203"\n    },\n    {\n      "index": "2",\n      "pubkey": "0x9ef666feaacf1d65c78af3b1c099c5096aa2e26afc21346fd66b8e7d5d9d6224"\n    }\n  ]\n}\n')),(0,o.kt)("h2",{id:"45-list-transactions-awaiting-confirmation"},"4.5. List transactions awaiting confirmation"),(0,o.kt)("p",null,"Use the following command to list the transactions currently awaiting custodian confirmation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"tonos-cli run <multisig_address> getTransactions {} --abi <MultisigWallet.abi.json>\n")),(0,o.kt)("p",null,"If there are some transactions requiring confirmation, they will be displayed."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli run 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc getTransactions {} --abi SafeMultisigWallet.abi.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: getTransactions\n  params: {}\n     abi: SafeMultisigWallet.abi.json\n    keys: None\nlifetime: None\n  output: None\nConnecting to net.ton.dev\nGenerating external inbound message...\nMessageId: ff8b8a73b1a7803a735eb4f620cade78ed45fd1530992fd3bedb91f3c66eacc5\nExpire at: Sat, 08 May 2021 15:16:59 +0300\nRunning get-method...\nSucceeded.\nResult: {\n  "transactions": [\n    {\n      "id": "6959890394123980993",\n      "confirmationsMask": "1",\n      "signsRequired": "4",\n      "signsReceived": "1",\n      "creator": "0x849ee401fde65ad8cda6d937bdc81e2beba0f36ba2f87115f4a2d24a15568203",\n      "index": "0",\n      "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n      "value": "234000000",\n      "sendFlags": "3",\n      "payload": "te6ccgEBAQEAAgAAAA==",\n      "bounce": false\n    }\n  ]\n}\n')),(0,o.kt)("h2",{id:"46-create-transaction-online"},"4.6. Create transaction online"),(0,o.kt)("p",null,"Use the following command to create a new transaction:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <multisig_address> submitTransaction \'{"dest":"raw_address","value":<nanotokens>,"bounce":true,"allBalance":false,"payload":""}\' --abi <MultisigWallet.abi.json> --sign <seed__or_keyfile>\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"dest"')," - raw address of a destination smart contract. Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3"')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"value":')," - amount of tokens to transfer in nanotokens (Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"value":10000000000')," sets up a transfer of 10 tokens)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"bounce"')," - use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," to transfer funds to a non-existing contract to create it. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," to transfer funds to an Active contract."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": at step ","[3.4]","](#34-send-tokens-to-the-new-address-from-another-wallet) of the wallet deployment procedure use ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},'"payload"'),' - use "" for simple transfer. Otherwise payload is used as a body of outbound internal message.')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"allBalance"')," - used to transfer all funds in the wallet. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," for a simple transfer."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Due to a bug setting ",(0,o.kt)("inlineCode",{parentName:"p"},"allBalance")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," currently causes errors. Single-custodian multisig wallets may use ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction")," method with flag ",(0,o.kt)("inlineCode",{parentName:"p"},"130")," and value ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," instead:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <multisig_address> sendTransaction \'{"dest":"raw_address","value":0,"bounce":true,"flags":130,"payload":""}\' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile>\n')),(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),".")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--sign keyfile.json")),(0,o.kt)("p",null,"If the wallet has multiple custodians and more than one custodian signature is required to execute a transaction, the new transaction is queued in the wallet and waits for the necessary amount of confirmations. Otherwise it is executed immediately."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli call 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc submitTransaction \'{"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":true,"allBalance":false,"payload":""}\' --abi SetcodeMultisigWallet.abi.json --sign k1.keys.json\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":234000000,"bounce":true,"allBalance":false,"payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nlifetime: None\n  output: None\nConnecting to net.ton.dev\nGenerating external inbound message...\nMessageId: c6baac843fefe6b9e8dc3609487a63ef21207e4fdde9ec253b9a47f7f5a88d01\nExpire at: Sat, 08 May 2021 14:52:23 +0300\nProcessing... \nSucceeded.\nResult: {\n  "transId": "6959885776551137793"\n}\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": For maximum security you may also create a transaction message on a machine without internet connection in offline mode. See section ",(0,o.kt)("a",{parentName:"p",href:"#48-create-new-transaction-offline"},"4.8"),".")),(0,o.kt)("h3",{id:"461-alternative-command-to-create-transaction-online"},"4.6.1. Alternative command to create transaction online"),(0,o.kt)("p",null,"TONOS-CLI supports alterbative syntax for this command, which does not use quotes and brackets to list parameters and may be more convenient:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'tonos-cli callex submitTransaction <multisig_address> <MultisigWallet.abi.json> <seed_or_keyfile> --dest <raw_address> --value <tokens>T --bounce <true|false> --allBalance <true|false> --payload ""\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"keyfile.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<raw_address>")," - raw address of a destination smart contract. Example: ",(0,o.kt)("inlineCode",{parentName:"p"},"0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"value")," - amount of tokens to transfer: in nanotokens, if specified without the ",(0,o.kt)("inlineCode",{parentName:"p"},"T")," suffix, or in tokens, if specified with it (Example: ",(0,o.kt)("inlineCode",{parentName:"p"},"--value 10500000000")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"--value 10.5T")," are the same value of 10.5 tokens)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"bounce")," - use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," to transfer funds to a non-existing contract to create it. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," to transfer funds to an Active contract."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": at step ",(0,o.kt)("a",{parentName:"p",href:"#34-send-tokens-to-the-new-address-from-another-wallet"},"3.4")," of the wallet deployment procedure use ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},"payload"),' - use "" for simple transfer. Otherwise payload is used as a body of outbound internal message.')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"allBalance")," - used to transfer all funds in the wallet. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," for a simple transfer."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Due to a bug setting ",(0,o.kt)("inlineCode",{parentName:"p"},"allBalance")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," currently causes errors. Single-custodian multisig wallets may use ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction")," method with flag ",(0,o.kt)("inlineCode",{parentName:"p"},"130")," and value ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," instead:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre"},'tonos-cli callex sendTransaction <multisig_address> <MultisigWallet.abi.json> <seed_or_keyfile> --dest <raw_address> --value 0 --bounce <true|false> --flags 130 --payload ""\n')),(0,o.kt)("p",{parentName:"blockquote"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli callex submitTransaction 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc SetcodeMultisigWallet.abi.json k1.keys.json --dest -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6 --value 0.234T --bounce false --allBalance false --payload ""\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6","value":"0234000000","bounce":"false","allBalance":"false","payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nConnecting to net.ton.dev\nGenerating external inbound message...\nMessageId: a38f37bfbe3c7427c869b3ee97c3b2d7f4421ca1427ace4e7a92f1a61d7ef234\nExpire at: Sat, 08 May 2021 15:10:15 +0300\nProcessing... \nSucceeded.\nResult: {\n  "transId": "6959890394123980993"\n}\n')),(0,o.kt)("h2",{id:"47-create-transaction-confirmation-online"},"4.7. Create transaction confirmation online"),(0,o.kt)("p",null,"Once one of the custodians creates a new transaction on the blockchain, it has to get the required number of confirmations from other custodians."),(0,o.kt)("p",null,"To confirm a transaction, use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli call <multisig_address> confirmTransaction \'{"transactionId":"<id>"}\' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile>\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"transactionId")," \u2013 the ID of the transaction can be acquired from the custodian who created it, or by requesting the list of transactions awaiting confirmation from the multisignature wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--sign keyfile.json")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": If the wallet has only one custodian, or if the number of confirmations required to perform a transaction was set to 1, this action won't be necessary. The transaction will be confirmed automatically.\nExample:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli call 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc confirmTransaction \'{"transactionId":"6981478983724354305"}\' --abi SetcodeMultisigWallet.abi.json --sign k2.keys.json\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: confirmTransaction\n  params: {"transactionId":"6981478983724354305"}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k2.keys.json\nlifetime: None\n  output: None\nConnecting to https://net.ton.dev\nGenerating external inbound message...\nMessageId: 322e1efffedf73c8009b84a103dd3fdc205796eb4d88a912fa13d931ce9e7c9c\nExpire at: Mon, 05 Jul 2021 19:28:08 +0300\nProcessing... \nSucceeded.\nResult: {}\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": For maximum security you may also create a transaction confirmation message on a machine without internet connection in offline mode. See section ",(0,o.kt)("a",{parentName:"p",href:"#49-create-transaction-confirmation-offline"},"4.9")),(0,o.kt)("h3",{parentName:"blockquote",id:"471-alternative-command-to-confirm-transaction-online"},"4.7.1. Alternative command to confirm transaction online")),(0,o.kt)("p",null,"TONOS-CLI supports alterbative syntax for this command, which does not use quotes and brackets to list parameters and may be more convenient:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli callex confirmTransaction <multisig_address> <MultisigWallet.abi.json> <seed_or_keyfile> --transactionId <id>\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"keyfile.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<id>")," - ID of the transaction that should be confirmed."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli callex confirmTransaction 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc SetcodeMultisigWallet.abi.json k2.keys.json --transactionId 6982528395137505473\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: confirmTransaction\n  params: {"transactionId":"6982528395137505473"}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k2.keys.json\nConnecting to https://net.ton.dev\nGenerating external inbound message...\nMessageId: 00048660c32d95313eeee7e09d89679e0c68f9a7660794736ba399c4c5fab011\nExpire at: Thu, 08 Jul 2021 15:26:26 +0300\nProcessing... \nSucceeded.\nResult: {}\n')),(0,o.kt)("h2",{id:"48-create-new-transaction-offline"},"4.8. Create new transaction offline"),(0,o.kt)("p",null,"An internet connection is not required to create a signed transaction message. Use the following command to do it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli message <multisig_address> submitTransaction \'{"dest":"raw_address","value":<nanotokens>,"bounce":true,"allBalance":false,"payload":""}\' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile> --lifetime 3600\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"dest"')," - raw address of a destination smart contract. Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"0:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3"'),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"value":')," - amount of tokens to transfer in nanotokens (Example: ",(0,o.kt)("inlineCode",{parentName:"p"},'"value":10000000000')," sets up a transfer of 10 tokens)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"bounce"')," - use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," to transfer funds to a non-existing contract to create it. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," to transfer funds to an Active contract."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"payload"'),' - use "" for simple transfer. Otherwise payload is used as a body of outbound internal message.'),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"allBalance"')," - used to transfer all funds in the wallet. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," for a simple transfer."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Due to a bug setting ",(0,o.kt)("inlineCode",{parentName:"p"},"allBalance")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," currently causes errors. Single-custodian multisig wallets may use ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction")," method with flag ",(0,o.kt)("inlineCode",{parentName:"p"},"130")," and value ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," instead:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre"},'tonos-cli message <multisig_address> sendTransaction \'{"dest":"raw_address","value":0,"bounce":true,"flags":130,"payload":""}\' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile> --lifetime 3600\n')),(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),".")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--sign keyfile.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"lifetime")," \u2013 message lifetime in seconds. Once this time elapses, the message will not be accepted by the contract."),(0,o.kt)("p",null,"The TONOS-CLI utility displays encrypted message text and a QR code that contains the submitTransaction message."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli message 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc submitTransaction \'{"dest":"0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3","value":567000000,"bounce":true,"allBalance":false,"payload":""}\' --abi SetcodeMultisigWallet.abi.json --sign k1.keys.json --lifetime 3600\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: submitTransaction\n  params: {"dest":"0:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3","value":567000000,"bounce":true,"allBalance":false,"payload":""}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k1.keys.json\nlifetime: 3600\n  output: None\nGenerating external inbound message...\nMessageId: 649e36ac7d656d1ce99f3e8b235074ff2483e115596a0233caacdf0c4ccf78a1\nExpire at: Thu, 08 Jul 2021 16:32:45 +0300\nMessage: 7b226d7367223a7b226d6573736167655f6964223a2236343965333661633764363536643163653939663365386232333530373466663234383365313135353936613032333363616163646630633463636637386131222c226d657373616765223a227465366363674542424145413051414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d415148686d4733712f3553464e2f79317a703749337433586243796874586a51734b48763437654e657479504f6e46524b3939487a444c7974644754307a4e784a50314e3964544a4c444f6766496a2b556f57784c366571686d456e7551422f655a61324d326d32546539794234723636447a61364c34635258306f744a4b46566143417741414158714747793062594f622b66524d64677332414341574f41424b7448577a763146556e6d6b44437456666a36382b6a366f45436a495871734b4f4a77364230324c763567414141414141414141414141414141454f58643446414d4141413d3d222c22657870697265223a313632353735313136352c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a227375626d69745472616e73616374696f6e227d\n<Message QR code>\n')),(0,o.kt)("p",null,"Copy the message text or scan the QR code and ",(0,o.kt)("a",{parentName:"p",href:"#411-broadcast-previously-generated-message"},"broadcast")," the message online."),(0,o.kt)("h2",{id:"49-create-transaction-confirmation-offline"},"4.9. Create transaction confirmation offline"),(0,o.kt)("p",null,"Once one of the custodians creates a new transaction on the blockchain, it has to get the required number of confirmations from other custodians."),(0,o.kt)("p",null,"To create a confirmation message offline use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli message <multisig_address> confirmTransaction \'{"transactionId":"<id>"}\' --abi <MultisigWallet.abi.json> --sign "<seed_or_keyfile>" --lifetime 600\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"transactionId")," \u2013 the ID of the transaction can be acquired from the custodian who created it, or by requesting the list of transactions awaiting confirmation from the multisignature wallet."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<seed_or_keyfile>")," - can either be the custodian seed phrase or the corresponding custodian key pair file. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"')),(0,o.kt)("p",null,"or"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--sign keyfile.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"lifetime")," \u2013 message lifetime in seconds. Once this time elapses, the message will not be accepted by the contract."),(0,o.kt)("p",null,"The TONOS-CLI utility displays encrypted transaction text and a QR code that contains the ",(0,o.kt)("inlineCode",{parentName:"p"},"confirmTransaction")," message."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ tonos-cli message 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc confirmTransaction \'{"transactionId":"6982528395137505473"}\' --abi SetcodeMultisigWallet.abi.json --sign k3.keys.json --lifetime 600\nConfig: default\nInput arguments:\n address: 0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc\n  method: confirmTransaction\n  params: {"transactionId":"6982528395137505473"}\n     abi: SetcodeMultisigWallet.abi.json\n    keys: k3.keys.json\nlifetime: 600\n  output: None\nGenerating external inbound message...\nMessageId: 1751be3063638271c2590ede75d71bfaa48b0dc76180443f1158ffc3d178148d\nExpire at: Thu, 08 Jul 2021 15:59:47 +0300\nMessage: 7b226d7367223a7b226d6573736167655f6964223a2231373531626533303633363338323731633235393065646537356437316266616134386230646337363138303434336631313538666663336431373831343864222c226d657373616765223a227465366363674542416745416f51414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d41514478394d2b686c7a4a523034444370564d6c586e775954466344495532424a304d51304966654971476f36712b6646526f717545664c326b792f6c766873667133707a77704c4463504a48566b663472412b6a6f5870676565396d622b717338645a63654b383748416d63554a61714c69617677684e472f5761343539585a31694a414141415871474b734b6f594f62327778716e514f3167357579556b6a2f597759413d3d222c22657870697265223a313632353734393138372c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a22636f6e6669726d5472616e73616374696f6e227d\n<QR code>\n')),(0,o.kt)("p",null,"Copy the message text or scan the QR code and ",(0,o.kt)("a",{parentName:"p",href:"#411-broadcast-previously-generated-message"},"broadcast")," the message online."),(0,o.kt)("h2",{id:"410-generate-deploy-message-offline"},"4.10. Generate deploy message offline"),(0,o.kt)("p",null,"If needed, signed deploy message can be generated without immediately broadcasting it to the blockchain. Generated message can be ",(0,o.kt)("a",{parentName:"p",href:"#411-broadcast-previously-generated-message"},"broadcasted")," later."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tonos-cli deploy_message [--raw] [--output <path_to_file>] [--sign <deploy_seed_or_keyfile>] [--wc <int8>] [--abi <contract.abi.json>] <contract.tvc> <params>\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--raw")," - use to create raw message boc."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--output <path_to_file>")," - specify path to file where the raw message should be written to, instead of printing it to terminal."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<deploy_seed_or_keyfile>")," - can either be the seed phrase used to generate the deployment key pair file or the key pair file itself. If seed phrase is used, enclose it in double quotes."),(0,o.kt)("p",null,"Example:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'--sign "flip uncover dish sense hazard smile gun mom vehicle chapter order enact"'))),(0,o.kt)("p",null,"or"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--sign deploy.keys.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"--wc <int8>")," ID of the workchain the wallet will be deployed to (",(0,o.kt)("inlineCode",{parentName:"li"},"-1")," for masterchain, ",(0,o.kt)("inlineCode",{parentName:"li"},"0")," for basechain). By default this value is set to 0.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<contract.abi.json>")," - contract interface file."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<contract.tvc>")," - compiled smart contract file."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<params>")," - deploy command parameters, depend on the contract."),(0,o.kt)("p",null,"Example (saving to a file contract deployment message to the masterchain):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli deploy_message --raw --output deploy.boc --sign key.json --wc -1 --abi SafeMultisigWallet.abi.json SafeMultisigWallet.tvc \'{"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\'\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n     tvc: SafeMultisigWallet.tvc\n  params: {"owners":["0x88c541e9a1c173069c89bcbcc21fa2a073158c1bd21ca56b3eb264bba12d9340"],"reqConfirms":1}\n     abi: SafeMultisigWallet.abi.json\n    keys: key.json\n      wc: -1\nMessageId: 51da1b8840bd12f9ef5152639bd1fe9062d77ed91829301043bb85b4a4d610ea\nExpire at: unknown\nMessage saved to file deploy.boc\nContract\'s address: -1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6\nSucceeded.\n')),(0,o.kt)("h2",{id:"411-broadcast-previously-generated-message"},"4.11. Broadcast previously generated message"),(0,o.kt)("p",null,"Use the following command to broadcast any previously generated message (transaction message, confirmation message, deploy message):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'tonos-cli send --abi <MultisigWallet.abi.json> "message"\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<MultisigWallet.abi.json>")," - either ",(0,o.kt)("inlineCode",{parentName:"p"},"SafeMultisigWallet.abi.json")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SetcodeMultisigWallet.abi.json")," depending on the contract you have selected at step ",(0,o.kt)("a",{parentName:"p",href:"#22-download-contract-files"},"2.2"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},"message")," \u2013 the content of the message generated by the TONOS-CLI utility during message creation. It should be enclosed in double quotes.\nExample:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tonos-cli send --abi SafeMultisigWallet.abi.json "7b226d7367223a7b226d6573736167655f6964223a2266363364666332623030373065626264386365643265333865373832386630343837326465643036303735376665373430376534393037646266663338626261222c226d657373616765223a227465366363674542424145413051414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d41514868757856507a324c5376534e663344454a2f374866653165562f5a78324d644e6b4b727770323865397a7538376a4d6e7275374c48685965367642523141756c48784b44446e4e62344f47686768386e6b6b7a48386775456e7551422f655a61324d326d32546539794234723636447a61364c34635258306f744a4b465661434177414141586c4d464e7077594a61616b524d64677332414341574f663459757151715976325233654e776d49655834517048686e37537a75624c76524838657931425a6a617a6a414141414141414141414141414141414a4d61735142414d4141413d3d222c22657870697265223a313632303438323730352c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a227375626d69745472616e73616374696f6e227d"\nConfig: /home/user/tonos-cli.conf.json\nInput arguments:\n message: 7b226d7367223a7b226d6573736167655f6964223a2266363364666332623030373065626264386365643265333865373832386630343837326465643036303735376665373430376534393037646266663338626261222c226d657373616765223a227465366363674542424145413051414252596742534d553677767679593746624464704a365a5748706b4c7846304545726f4b4a36775165555369536633674d41514868757856507a324c5376534e663344454a2f374866653165562f5a78324d644e6b4b727770323865397a7538376a4d6e7275374c48685965367642523141756c48784b44446e4e62344f47686768386e6b6b7a48386775456e7551422f655a61324d326d32546539794234723636447a61364c34635258306f744a4b465661434177414141586c4d464e7077594a61616b524d64677332414341574f663459757151715976325233654e776d49655834517048686e37537a75624c76524838657931425a6a617a6a414141414141414141414141414141414a4d61735142414d4141413d3d222c22657870697265223a313632303438323730352c2261646472657373223a22303a61343632396436313764663933316438616438366564323466346361633364333231373838626130383235373431343466353832306632383934343933666263227d2c226d6574686f64223a227375626d69745472616e73616374696f6e227d\n     abi: SafeMultisigWallet.abi.json\nConnecting to net.ton.dev\nMessageId: f63dfc2b0070ebbd8ced2e38e7828f04872ded060757fe7407e4907dbff38bba\nExpire at: Sat, 08 May 2021 17:05:05 +0300\nCalling method submitTransaction with parameters:\n{\n  "dest": "-1:0c5d5215317ec8eef1b84c43cbf08523c33f69677365de88fe3d96a0b31b59c6",\n  "value": "1234000000",\n  "bounce": false,\n  "allBalance": false,\n  "payload": "te6ccgEBAQEAAgAAAA=="\n}\nProcessing... \nProcessing... \nSucceded.\nResult: {\n  "transId": "6959904904053506881"\n}\n')),(0,o.kt)("p",null,"If transaction requires multiple confirmations, the terminal displays the transaction ID, which should be sent to other wallet custodians."),(0,o.kt)("h1",{id:"5-error-codes"},"5. Error codes"),(0,o.kt)("p",null,"Errors related to the operation of multisig contracts typically are displayed like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "code": 507,\n  "message": "Message expired. Contract was not executed on chain. Possible reason: Contract execution was terminated with error: Contract did not accept message, exit code: 103. For more information about exit code check the contract source code or ask the contract developer",\n  "data": {\n    "message_id": "029502efa1f4d5701713de772947de0c9447746abfb1c1191e403220698cf8cb",\n    "shard_block_id": "baf38272f69eca4291e58958813d82cbc3e2107f0dc63ed261c2017232e3b714",\n    "core_version": "1.14.1",\n    "waiting_expiration_time": "Thu, 20 May 2021 18:23:37 +0300 (1621524217)",\n    "block_time": "Thu, 20 May 2021 18:23:40 +0300 (1621524220)",\n    "account_address": "0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc",\n    "local_error": {\n      "code": 414,\n      "message": "Contract execution was terminated with error: Contract did not accept message, exit code: 103. For more information about exit code check the contract source code or ask the contract developer",\n      "data": {\n        "core_version": "1.14.1",\n        "phase": "computeVm",\n        "exit_code": 103,\n        "exit_arg": "0",\n        "account_address": "0:a4629d617df931d8ad86ed24f4cac3d321788ba082574144f5820f2894493fbc"\n      }\n    },\n    "config_servers": [\n      "net1.ton.dev",\n      "net5.ton.dev"\n    ],\n    "query_url": "https://net5.ton.dev/graphql"\n  }\n}\nError: All attempts have failed\nError: 1\n')),(0,o.kt)("p",null,"Multisig error codes, corresponding to the event that caused the error are specified in the ",(0,o.kt)("inlineCode",{parentName:"p"},"exit_code")," parameter.\nThe list of possible exit codes and what they mean is as follows:\n",(0,o.kt)("strong",{parentName:"p"},"100")," - message sender is not a custodian - ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"submitTransaction")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"confirmTransaction")," method was called by someone who is not a wallet custodian.\n",(0,o.kt)("strong",{parentName:"p"},"102")," - transaction does not exist - ID of the transaction that custodian attempted to confirm is not present in multisig.\n",(0,o.kt)("strong",{parentName:"p"},"103")," - operation is already confirmed by this custodian - custodian attempted to confirm transaction twice.\n",(0,o.kt)("strong",{parentName:"p"},"107")," - input value is too low - transaction amount is less than the minimum amount (1000000 nanotons).\n",(0,o.kt)("strong",{parentName:"p"},"108")," - wallet should have only one custodian - wallet custodian attempted to call ",(0,o.kt)("inlineCode",{parentName:"p"},"sendTransaction")," in a wallet with more than one custodian.\n",(0,o.kt)("strong",{parentName:"p"},"113")," - Too many requests for one custodian - the maximum amount of queued ",(0,o.kt)("inlineCode",{parentName:"p"},"submitTransaction")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"submitUpdate")," calls was reached (currently, this amount is set to 5). Custodian has to wait until the calls are executed, before queuing any more.\n",(0,o.kt)("strong",{parentName:"p"},"117")," - invalid number of custodians - the number of custodians specified during multisig deploy exceeds the maximum amount (currently, this amount is set to 32).\n",(0,o.kt)("strong",{parentName:"p"},"121")," - payload size is too big; ",(0,o.kt)("inlineCode",{parentName:"p"},"submitTransaction")," payload exceeds the maximum limit.\n",(0,o.kt)("strong",{parentName:"p"},"SetcodeMultisig-specific errors"),"\n",(0,o.kt)("strong",{parentName:"p"},"115")," - update request does not exist - Setcode request with the specified ID is not present in the multisig.\n",(0,o.kt)("strong",{parentName:"p"},"116")," - update request already confirmed by this custodian - Setcode request with the specified ID is already confirmed by the current custodian.\n",(0,o.kt)("strong",{parentName:"p"},"119")," - stored code hash and calculated code hash are not equal - the code hash submitted in ",(0,o.kt)("inlineCode",{parentName:"p"},"executeUpdate")," is not equal to the code previously submitted in ",(0,o.kt)("inlineCode",{parentName:"p"},"submitUpdate")," .\n",(0,o.kt)("strong",{parentName:"p"},"120")," - update request is not confirmed; cannot perform ",(0,o.kt)("inlineCode",{parentName:"p"},"executeUpdate")," as the setcode request was not confirmed by the required number of custodians yet.\n",(0,o.kt)("strong",{parentName:"p"},"Currently unused error codes"),"\n110 - too many custodians - not currently used.\n122 - object is expired - not currently used."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"}," The documentation in Everscale repository is a community effort. Therefore, everyone can contribute with proposals for new topics, suggest new content elements, participate in editing, and provide ideas that will be of great help for network development.\nPlease be informed that our documentation can be ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/everscale-org/docs/issues"},"edited via GitHub"),".",(0,o.kt)("br",{parentName:"p"}),"\n","Also please make sure to consult our rules and rewards policy via ",(0,o.kt)("a",{parentName:"p",href:"https://docs.everscale.network/contribute/hot-streams/documentations"},"this link"),".",(0,o.kt)("br",{parentName:"p"}),"\n","Feel free to join ",(0,o.kt)("a",{parentName:"p",href:"https://t.me/+C2IpQXWZtCwxYzEy"},"Everscale Documentation Development Telegram chat")," and ",(0,o.kt)("a",{parentName:"p",href:"https://t.me/+Vca1Gs6uPzIyNWVi"},"Everscale Developers Onboarding Telegram chat"),"!")))}f.isMDXComponent=!0}}]);