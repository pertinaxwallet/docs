<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-validate/depools/getting-started">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Getting started | Docs of Everscale</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.everscale.network/validate/depools/getting-started"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting started | Docs of Everscale"><meta data-rh="true" name="description" content="This document contains instructions on how to deploy and configure a DePool smart contract, and run a validator node through it."><meta data-rh="true" property="og:description" content="This document contains instructions on how to deploy and configure a DePool smart contract, and run a validator node through it."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.everscale.network/validate/depools/getting-started"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/validate/depools/getting-started" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.everscale.network/validate/depools/getting-started" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ebfab3f4.css">
<link rel="preload" href="/assets/js/runtime~main.fe471d0f.js" as="script">
<link rel="preload" href="/assets/js/main.f613e946.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Everscale Documentation" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Everscale Documentation" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Everscale Documentation</b></a><a class="navbar__item navbar__link" href="/arch">Architecture</a><a class="navbar__item navbar__link" href="/standard">Standards</a><a class="navbar__item navbar__link" href="/develop">Build</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/validate">Validate</a><a class="navbar__item navbar__link" href="/develop/integrate">Integrate</a><a class="navbar__item navbar__link" href="/learn">Learn</a><a class="navbar__item navbar__link" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.everscale.network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://everos.dev/status" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/everscale-org/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/learn">Learn</a><button aria-label="Toggle the collapsible sidebar category &#x27;Learn&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/arch">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/develop">Build</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/validate">Validate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validate&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/validate/tutorial">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/validate/run-validator">Run Validator</a><button aria-label="Toggle the collapsible sidebar category &#x27;Run Validator&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/validate/depools">DePools</a><button aria-label="Toggle the collapsible sidebar category &#x27;DePools&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/validate/depools/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/validate/depools/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/validate/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/validate/staking">Staking</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/validate/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/validate/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/standard">Standards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Standards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/contribute">Contribute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contribute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Standard/TIP-32/core-description">Standard</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/changelog">Network Changelog</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/validate"><span itemprop="name">Validate</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/validate/depools"><span itemprop="name">DePools</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting started</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Getting started</h1><p>This document contains instructions on how to deploy and configure a DePool smart contract, and run a validator node through it.</p><blockquote><p>EverX DePools repository <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/depool" target="_blank" rel="noopener noreferrer">https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/depool</a></p></blockquote><p>It is intended for the latest version of the DePool contract. For instructions on the archive versions of DePool refer to the relevant <a href="https://github.com/tonlabs/ton-labs-contracts/releases" target="_blank" rel="noopener noreferrer">tags</a> in the repository. Note that they are intended for reference only and should not be used on the network anymore.</p><blockquote><p><strong>Note</strong>: For RustCup use the DePool from <code>RUSTCUP_DEPOOL_--_DO_NOT_DEPLOY_ON_MAINNET</code> branch. <strong>Do not use it on any other network</strong>.
For detailed information on DePool specifications, please refer to the <a href="/learn/decentralization/depool-specifications">relevant document</a>.</p></blockquote><p>Answers to frequently asked questions can be found <a href="/validate/depools/faq">here</a>.</p><blockquote><p><strong>Note</strong>: One node can be assigned to only one DePool contract.
<strong>Note</strong>: Validator contest winners are strongly recommended not to deploy DePool to the main net without previously testing their setup out on the devnet for a few days. Test tokens for staking on the devnet can be requested from community admins.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><p><a href="https://github.com/tonlabs/tonos-cli" target="_blank" rel="noopener noreferrer">TONOS-CLI</a> of the latest version (0.3.0 or later) installed and configured.</p><p><a href="https://github.com/tonlabs/TVM-linker" target="_blank" rel="noopener noreferrer">tvm_linker</a> utility.</p><p>Resources required to run a node available:</p><ul><li><a href="https://docs.ton.dev/86757ecb2/v/0/p/708260-run-validator/t/2177a7" target="_blank" rel="noopener noreferrer">For C++ node</a></li><li><a href="https://github.com/tonlabs/rustnet.ton.dev#1-system-requirements" target="_blank" rel="noopener noreferrer">For Rust node</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="procedure">Procedure<a class="hash-link" href="#procedure" title="Direct link to heading">​</a></h2><p>To function correctly, the DePool contract requires an active validator node and a set of supporting smart contracts, that have to be deployed and configured alongside it:</p><ol><li>The Validator Wallet, which should be a <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig" target="_blank" rel="noopener noreferrer">multisignature wallet</a> with at least three custodians and <code>reqConfirms</code> &gt; 1. <strong>Can be deployed to the basechain</strong>.</li><li>The DePool contract itself, <strong>deployed to the basechain</strong>. DePool contract deploys two proxy smart contracts to the masterchain, which will pass messages from the DePool to the Elector smart contract. Two proxies are required to support two staking rounds running in parallel, one for odd rounds, and one for even rounds.</li><li>Optionally, the DePool Helper contract, which is connected to the global Timer contract and ensures regular operation of the DePool. Also <strong>deployed to the basechain.</strong> Can be replaced with <a href="#7-configure-depool-state-update-method">other methods</a> of updating DePool state.</li></ol><blockquote><p>Important: the only contracts requiring masterchain in this setup are the two proxy contracts, <strong>which are deployed by DePool</strong>. Everything else is designed to function on the basechain, as the contracts are rather complex and consume a lot of gas.
Once all of these contracts are deployed and configured, the DePool is ready to receive stakes.</p></blockquote><p>Follow the steps described below to complete this procedure.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-set-up-node-and-deploy-validator-wallet">1. Set Up Node and Deploy Validator Wallet<a class="hash-link" href="#1-set-up-node-and-deploy-validator-wallet" title="Direct link to heading">​</a></h3><p>When using DePool you may set up the validator wallet <strong>on the basechain</strong>, as the DePool itself operates on the basechain and will pass your stakes to the masterchain Elector contract through its proxy contracts.</p><p>With that in mind, follow:</p><ul><li>For C++ node -  <a href="https://docs.ton.dev/86757ecb2/v/0/p/708260-run-validator" target="_blank" rel="noopener noreferrer">this procedure</a> up to step 4.4 (the validator script in step 5 will be <a href="#10-set-up-validator-script">different</a>) </li><li>For Rust node - <a href="https://github.com/tonlabs/rustnet.ton.dev" target="_blank" rel="noopener noreferrer">this procedure</a> up to step 6</li></ul><p>and make sure to set up at least three custodians for your wallet.</p><p>Make sure that in the course of the procedure:</p><p>For C++ node:</p><ul><li>validator wallet address was specified in the <code>~/ton-keys/$(hostname -s).addr</code> file.</li><li>validator wallet keys were saved to the <code>~/ton-keys/msig.keys.json</code> file.</li></ul><p>For Rust node:</p><ul><li>validator wallet address was specified in the <code>/ton-node/configs/${VALIDATOR_NAME}.addr</code> file.</li><li>validator wallet keys were saved to the <code>/ton-node/configs/keys/msig.keys.json</code> file.</li></ul><p>The wallet address will also be needed on the following steps.</p><p>As always, also make sure to securely backup all of your seed phrases and/or wallet keys, generated during wallet and node setup. If you lose them, you will not be able to recover access to your funds.</p><blockquote><p>Note:  The validator wallet should have a small sum of tokens available at all times to reliably send election requests to DePool. Each election request costs ~ 1 Ton.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-prepare-depool-and-supporting-smart-contracts">2. Prepare DePool and Supporting Smart Contracts<a class="hash-link" href="#2-prepare-depool-and-supporting-smart-contracts" title="Direct link to heading">​</a></h3></blockquote><p>Obtain contract code from the <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/depool" target="_blank" rel="noopener noreferrer">repository</a>.</p><blockquote><p><strong>Note</strong>: For RustCup use the DePool from <code>RUSTCUP_DEPOOL_--_DO_NOT_DEPLOY_ON_MAINNET</code> branch. <strong>Do not use it on any other network.</strong>
The files required for DePool deployment are comprised of three pairs of compiled contract .tvc files and their corresponding ABI files:</p></blockquote><p><code>DePoolProxy.tvc</code></p><p><code>DePool.tvc</code> and <code>DePool.abi.json</code></p><p><code>DePoolHelper.tvc</code> and <code>DePoolHelper.abi.json</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-generate-deployment-keys">3. Generate Deployment Keys<a class="hash-link" href="#3-generate-deployment-keys" title="Direct link to heading">​</a></h3><p>Use TONOS-CLI to generate seed phrases for the contracts you will be deploying:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli genphrase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Do not reuse wallet keys, or any other keys you may have used elsewhere already.</p><p>Securely backup these seed phrases and keep them secret, as without them, control over the DePool contract will be lost (for example, without its key, the DePool cannot be closed). If you suspect that your keys are compromised, close the DePool and deploy it anew with new keys and a new set of supporting contracts.</p><p>Generate key pair files from the seed phrases (this step is intended for the sake of convenience as nothing in the seed phrases indicates for what contract they are intended, and they are easy to mix up).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli getkeypair depool.json </span><span class="token string" style="color:#e3116c">&quot;seed_phrase_for_depool&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli getkeypair helper.json </span><span class="token string" style="color:#e3116c">&quot;seed_phrase_for_helper&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-calculate-contract-addresses">4. Calculate Contract Addresses<a class="hash-link" href="#4-calculate-contract-addresses" title="Direct link to heading">​</a></h3><p>The smart contracts you will be deploying need to be configured to know the addresses of each other. Thus, first you have to calculate and save the addresses of every contract to be deployed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="41-calculate-depool-address">4.1. Calculate DePool address<a class="hash-link" href="#41-calculate-depool-address" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli genaddr DePool.tvc DePool.abi.json --setkey depool.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save the DePool address.</p><p>Put it into the following files in in your validator node setup:</p><ul><li><code>~/ton-keys/depool.addr</code> file - for C++ Node </li><li><code>/ton-node/configs/depool.addr</code> - for Rust Node</li></ul><p>It will be required for the <a href="#10-set-up-validator-script">validator script</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="42-optional-calculate-depool-helper-address">4.2. (Optional) Calculate DePool Helper address<a class="hash-link" href="#42-optional-calculate-depool-helper-address" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli genaddr DePoolHelper.tvc DePoolHelper.abi.json --setkey helper.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save the DePool Helper address.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-send-coins-to-the-calculated-addresses">5. Send Coins to the Calculated Addresses<a class="hash-link" href="#5-send-coins-to-the-calculated-addresses" title="Direct link to heading">​</a></h3><p>Send some coins to all addresses calculated on step 4 to initialize them with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;contract_address&quot;,&quot;value&quot;:*number*,&quot;bounce&quot;:&quot;false&quot;,&quot;allBalance&quot;:&quot;false&quot;,&quot;payload&quot;:&quot;&quot;}&#x27;</span><span class="token plain"> --abi </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">MultisigWallet.abi.json</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_seed_or_keyfile</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;wallet_address&gt;</code> - is the address of the wallet, from which you are making the transaction</p><p><code>&lt;contract_address&gt;</code> - address of one of the contracts, calculated on step 4.</p><p><code>&quot;value&quot;:*number*</code> - the amount of coins to be transferred (in nanotokens).</p><p><code>&quot;bounce&quot;:&quot;false&quot;</code> - bounce flag set to false, to allow a transaction to an account that is not yet initialized.</p><p><code>&lt;MultisigWallet.abi.json&gt;</code> - the ABI file of the contract, from which you are making the transaction (for validator wallets - usually <code>SafeMultisigWallet.abi.json</code>)</p><p><code>&lt;wallet_seed_or_keyfile&gt;</code> - either the seed phrase in double quotes, or the path to the keyfile for the wallet, from which you are making the transaction</p><p><code>allBalance</code> and <code>payload</code> values in this case remain default.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:2bb4a0e8391e7ea8877f4825064924bd41ce110fce97e939d3323999e1efbb13 submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace&quot;,&quot;value&quot;:200000000,&quot;bounce&quot;:&quot;false&quot;,&quot;allBalance&quot;:&quot;false&quot;,&quot;payload&quot;:&quot;&quot;}&#x27;</span><span class="token plain"> --abi ./SafeMultisigWallet.abi.json --sign ./wallet.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig#47-create-transaction-confirmation-online" target="_blank" rel="noopener noreferrer">Confirm the transaction</a>, if it is required.</p><p>Such a transaction should be repeated for every address calculated on step 4: the DePool contract itself and, optionally, the DePool Helper contract.</p><p>The recommended initial amounts are:</p><ul><li>21 Evers to the DePool conrtact</li><li>5 Evers to the DePool Helper</li><li>10 Evers should be left on the validator wallet</li></ul><p>For the duration of the DePool existence, balance on all DePool-related contracts should be maintained:</p><blockquote><p><a href="#proxy-balance">Proxies</a> receive fees for their services automatically, but if they run out of funds for any reason, DePool might miss elections.
<a href="#depool-helper-balance">Helper</a>, on the other hand, should be topped up regularly, depending on the set timer period. Without funds on the Helper contract, DePool will not be able to function regularly.
The <a href="#depool-balance">DePool</a> itself receives funds for its operations from validation rewards, but may also, if it stops receiving these rewards, run out of funds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-deploy-contracts">6. Deploy Contracts<a class="hash-link" href="#6-deploy-contracts" title="Direct link to heading">​</a></h3></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="61-deploy-depool-contract-to-the-basechain">6.1. Deploy DePool contract to the basechain<a class="hash-link" href="#61-deploy-depool-contract-to-the-basechain" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli deploy DePool.tvc </span><span class="token string" style="color:#e3116c">&#x27;{&quot;minStake&quot;:*number*,&quot;validatorAssurance&quot;:*number*,&quot;proxyCode&quot;:&quot;&lt;ProxyContractCodeInBase64&gt;&quot;,&quot;validatorWallet&quot;:&quot;&lt;validatorWalletAddress&gt;&quot;,&quot;participantRewardFraction&quot;:*number*}&#x27;</span><span class="token plain"> --abi DePool.abi.json --sign depool.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> Where</p><p><code>&quot;minStake&quot;:*number*</code> – minimum stake (in nanoevers) that DePool accepts from participants. It&#x27;s recommended to set it not less than 10 tokens.</p><p><code>&quot;validatorAssurance&quot;:*number*</code> - minimal stake for validator. If validator has stake less than <strong>validatorAssurance</strong>, DePool won&#x27;t be taking part in elections.</p><p><code>ProxyContractCodeInBase64</code> - code of the proxy contract. Can be obtained by calling <a href="https://github.com/tonlabs/TVM-linker" target="_blank" rel="noopener noreferrer">tvm_linker</a>: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tvm_linker decode --tvc DePoolProxy.tvc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>&lt;validatorWalletAddress&gt;</code> – validator wallet address from step 1.</p><p><code>&quot;participantRewardFraction&quot;:*number*</code> - percentage of the total DePool reward (in integers, up to 99 inclusive) that goes to Participants. It&#x27;s recommended to set it at 95% or more.</p><blockquote><p><strong>Important: You will not be able to change all of these parameters, except <code>participantRewardFraction</code>, after the DePool is deployed. They will influence the appeal of your DePool to potential participants:</strong>
<code>participantRewardFraction</code> determines what percentage of their total reward all participants will receive (too small, and other DePools might draw them away, too big, and your validator wallet might not receive enough rewards, to support validation and staking); it can be adjusted at any time by the DePool owner, but only upwards - see how <a href="#13-optional-adjust-validator-and-participant-reward-fraction">below</a>.
<code>validatorAssurance</code> determines how much you take it upon yourself to invest in the DePool and lose in case of any validator node malfunction or misbehavior. If set too small, potential participants might decide you aren&#x27;t risking enough and avoid your DePool in favor of others.
Example:</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli deploy DePool.tvc </span><span class="token string" style="color:#e3116c">&#x27;{&quot;minStake&quot;:10000000000,&quot;validatorAssurance&quot;:100000000000000,&quot;proxyCode&quot;:&quot;te6ccgECIgEABdIAAib/APSkICLAAZL0oOGK7VNYMPShBwEBCvSkIPShAgIDzkAGAwIB1AUEADk7UTQ0//TP9MA0wf6QPhs+Gv4an/4Yfhm+GP4YoAA9PhCyMv/+EPPCz/4Rs8LAPhK+Ev4TF4gywfOzsntVIADTu/CC3SXgE7zRTfjAQaY/pn5mQwQh/////XUcjuDRTfbBKtFN/MBjvwQgCrqVAUNq//CW4ZGfCwGUAOeegZwD9AUaCIAAAAAAAAAAAAAAAAACHtMu6Z4sQ54Wf/CTni2S4/YBvL4HJeARvQIBIBAIAgFuDwkCASAOCgIBIA0LAZj6f40IYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPhpIe1E0CDXScIBjhnT/9M/0wDTB/pA+Gz4a/hqf/hh+Gb4Y/hiDAG4joDi0wABn4ECANcYIPkBWPhC+RDyqN7TPwGOHvhDIbkgnzAg+COBA+iogggbd0Cgud6S+GPggDTyNNjTHyHBAyKCEP////28sZZbcfAB8AXgAfAB+EdukzDwBd4WALu0t7mSfCC3SXgE72mf6Lg0U32wSrRTfzAY78EIAq6lQFDav/wluGRnwsBlADnnoGcA/QFGgiAAAAAAAAAAAAAAAAAB8+0HGmeLEOeFn/wk54tkuP2AGEl4BG8//DPAAMe23RITPhBbpLwCd7TP9Mf0XBopvtglWim/mAx34IQBV1KgKG1f/hLcMjPhYDKAHPPQM4B+gKNBEAAAAAAAAAAAAAAAAABM+vBdM8WIs8LPyHPCx/4Sc8WyXH7AFuS8Ajef/hngAMe5zeipnwgt0l4BO9pn+mP6Lg0U32wSrRTfzAY78EIAq6lQFDav/wluGRnwsBlADnnoGcA/QFGgiAAAAAAAAAAAAAAAAABO2QLJmeLEWeFn5DnhY/8JOeLZLj9gC3JeARvP/wzwAgEgGxECASAYEgEPuotV8/+EFugTATKOgN74RvJzcfhm0fhJ+EvHBfLgZvAIf/hnFAFG7UTQINdJwgGOGdP/0z/TANMH+kD4bPhr+Gp/+GH4Zvhj+GIVAQaOgOIWAf70BXEhgED0DpPXCweRcOL4anIhgED0Do4kjQhgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE3/hrcyGAQPQOjiSNCGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATf+GxwAYBA9A7yvdcL//hicPhjFwAMcPhmf/hhAgFqGhkA8bTYWbL8ILdJeATvaZ/9IGj8JPwl44L5cDN8E7eIODRTfbBKtFN/MBjvwQgdzWUAUFq/33lwM7g0U32wSrRTfzAY78EIAq6lQFDav5DkZ8LEZwD9AUaCIAAAAAAAAAAAAAAAAAEdldCSZ4sRZ4Wf5Lj9gC34BD/8M8AApbQlaov8ILdJeATvaPwk/CZjgvlwNHwTt4gQOUEIHc1lAFRan99HERA5QQgdzWUAVFqf0Nq/kHwmZGfChGcA/QFANeegZLh9gBhvGEl4BG8//DPAAgEgHRwAn7rbxCnvhBbpLwCd7R+EuCEDuaygAiwP+OLSTQ0wH6QDAxyM+HIM6NBAAAAAAAAAAAAAAAAArbxCnozxYizxYhzws/yXH7AN5bkvAI3n/4Z4AgEgIR4BCbhxdZGQHwH6+EFukvAJ3tM/0//TH9Mf1w3/ldTR0NP/3yDXS8ABAcAAsJPU0dDe1PpBldTR0PpA39H4SfhLxwXy4Gb4J28QcGim+2CVaKb+YDHfghA7msoAoLV/vvLgZ3BopvtglWim/mAx34IQBV1KgKG1fyHIz4WIzgH6AoBqz0DPg8ggAFLPkTnN0S4ozws/J88L/ybPCx8lzwsfJM8L/yPPFM3JcfsAXwfwCH/4ZwCC3HAi0NMD+kAw+GmpOADcIccAIJwwIdMfIcAAIJJsId7f3CHBAyKCEP////28sZZbcfAB8AXgAfAB+EdukzDwBd4=&quot;,&quot;validatorWallet&quot;:&quot;0:0123012301230123012301230123012301230123012301230123012301230123&quot;,&quot;participantRewardFraction&quot;:95}&#x27;</span><span class="token plain"> --abi DePool.abi.json --sign depool.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong>: For RustCup, make sure to get the proxy code from the contract file in the <code>RUSTCUP_DEPOOL_--_DO_NOT_DEPLOY_ON_MAINNET</code> branch. <strong>Do not use it on any other network</strong>.
At the time of deployment, the variable <code>m_balanceThreshold</code> is set as current DePool account balance - 5 tokens. DePool will replenish its balance from validation rewards to this value every round it receives rewards.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="62-optional-deploy-depool-helper-contract-to-the-basechain">6.2. (Optional) Deploy DePool Helper contract to the basechain<a class="hash-link" href="#62-optional-deploy-depool-helper-contract-to-the-basechain" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli deploy DePoolHelper.tvc </span><span class="token string" style="color:#e3116c">&#x27;{&quot;pool&quot;:&quot;DePoolAddress&quot;}&#x27;</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;DePoolAddress&gt;</code> – address <strong>of the DePool contract</strong> from step 4.1.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli deploy DePoolHelper.tvc </span><span class="token string" style="color:#e3116c">&#x27;{&quot;pool&quot;:&quot;0:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace&quot;}&#x27;</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json --wc </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-configure-depool-state-update-method">7. Configure DePool State Update method<a class="hash-link" href="#7-configure-depool-state-update-method" title="Direct link to heading">​</a></h3><p>There are three different methods of setting up regular state updates of the DePool contract available. You have to set up one of them to run regularly. The period for state updates should be chosen based on the duration of the validation cycle on the blockchain. At the very minimum DePool&#x27;s state update function should be called four times during the validation cycle:</p><p>1) At least twice after the elections begin, so DePool gets ready to receive and forward validator&#x27;s election request.
2) Once after the validation begins, to find out if it won elections or not.
3) Once after unfreeze, to process stakes and rewards and rotate the rounds.</p><p>In the current network configuration, 1 and 3 coincide, so DePool&#x27;s state update should be called be called at least three times during the validation cycle - at least twice twice during elections and once during validation.</p><p>For Rust node you can use the <a href="https://github.com/tonlabs/rustnet.ton.dev/blob/main/docker-compose/ton-node/scripts/send_depool_tick_tock.sh" target="_blank" rel="noopener noreferrer">provided</a> ticktock script, which sends 5 ticktocks after the elections open.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="state-update-through-multisig-contract">State update through Multisig Contract<a class="hash-link" href="#state-update-through-multisig-contract" title="Direct link to heading">​</a></h4><p>A Multisig wallet can be used instead of Helper to call DePool&#x27;s ticktock function directly.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ticktock </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-w </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-s </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path_to_keys_or_seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>--addr &lt;depool_address&gt;</code> - the address of the DePool</p><p><code>-w &lt;msig_address&gt;</code> - the address of the multisig wallet used to call DePool</p><p><code>-s &lt;path_to_keys_or_seed_phrase&gt;</code> - either the keyfile for the wallet, or the seed phrase in quotes</p><p>All these options can be skipped, if they were previously specified in the TONOS-CLI configuration file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli config --addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --keys </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path_to_keys or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1 token is always attached to this call. Change will be returned.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace ticktock -w </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e -s </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="state-update-through-depool-helper-contract-temporarily-unavailable">State update through DePool Helper contract (temporarily unavailable)<a class="hash-link" href="#state-update-through-depool-helper-contract-temporarily-unavailable" title="Direct link to heading">​</a></h4><p>If you have previously deployed DePool helper, you can set it up to regularly call the DePool state update ticktock function. To do it, DePool Helper contract needs to be connected to the global Timer contract. Use the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call HelperAddress initTimer </span><span class="token string" style="color:#e3116c">&#x27;{&quot;timer&quot;:&quot;TimerAddress&quot;,&quot;period&quot;:*number*}&#x27;</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;HelperAddress&gt;</code> – is the address of the Helper contract from step 4.2</p><p><code>&lt;TimerAddress&gt;</code> - is the address of the global timer contract.</p><p><code>&quot;period&quot;:*number*</code> - is the period for regular DePool contract calls via ticktock messages (in seconds). This period should be chosen based on the duration of the validation cycle on the blockchain. At a minimum DePool Helper contract should be set to call the DePool contract once every step of the validation cycle.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e initTimer </span><span class="token string" style="color:#e3116c">&#x27;{&quot;timer&quot;:&quot;0:3a10ef5d6435e82eb243b41e620f6a7737a70694884aca1c52c99088efb7643d&quot;,&quot;period&quot;:3600}&#x27;</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Timer contract and period may be changed at any time with this command.</p><p><strong>Timer fees</strong></p><p>Timer charges a fee for its services every time the Helper calls it.</p><p>The fees (in nanoevers) are calculated according to the following formula:</p><p><code>fee = period * timerRate + fwdFee * 8 + epsilon</code></p><p>Where</p><p><code>timerRate</code> = 400000 nanoevers per second</p><p><code>fwdFee</code> = 1000000 nanoevers</p><p><code>epsilon</code> = 1e9 nanoevers</p><p><code>period</code> = the period set in the DePool Helper contract (in seconds).</p><p>Thus, the longer the period set in the DePool Helper contract is, the higher a single timer fee will be.</p><p>To pay these fees reliably, sufficient positive balance (~100 Evers if the period is set to 1 hour) has to be maintained on the Helper. Without funds on the Helper contract, DePool will not be able to function regularly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="state-update-through-external-call-of-the-depool-helper-contract">State update through external call of the DePool Helper Contract<a class="hash-link" href="#state-update-through-external-call-of-the-depool-helper-contract" title="Direct link to heading">​</a></h4><p>DePool Helper can be called to send the ticktock message manually at any time with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">HelperAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sendTicktock </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;HelperAddress&gt;</code> – is the address of the Helper contract from step 4.2.</p><p>If needed, it can be set up to run regularly (for example, with <code>cron</code> utility) to supplement or replace the timer.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@hourly        </span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">tonos-cli-dir</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">HelperAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sendTicktock </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;tonos-cli-dir&gt;</code> - directory with TONOS-CLI configuration file, <code>DePoolHelper.abi.json</code> file and <code>helper.json</code> keyfile containing DePool Helper keys.</p><p><code>&lt;HelperAddress&gt;</code> – address of the Helper contract from step 4.2.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-make-stakes">8. Make Stakes<a class="hash-link" href="#8-make-stakes" title="Direct link to heading">​</a></h3><p>DePool collects stakes from various participants to be pooled together and forwarded as one stake to the Elector on behalf of its validator node.</p><p>Collection is continuous. Stakes can be made at any time, and will be distributed to whichever round is currently in the <a href="https://docs.ton.dev/86757ecb2/v/0/p/45d6eb-depool-specifications/t/13b9d0" target="_blank" rel="noopener noreferrer">pooling</a> stage. Every time an election begins on the blockchain, the accumulated pool is locked and (if all conditions are met) staked in this election, and the pooling stage of the next round begins.</p><blockquote><p>Note: This means, that a DePool stake for a specific election needs to be made before the election begins.
To participate in elections, DePool has to accumulate, through stakes belonging to the validator wallet and, optionally, from other wallets, a staking pool, validator&#x27;s share of which is not less than <code>validatorAssurance</code> (see section 6.1 <a href="#61-deploy-depool-contract-to-the-basechain">above</a>).</p></blockquote><p>TONOS-CLI allows to manage several types of <a href="#deposit-stakes">stakes</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="depool-fees">DePool fees<a class="hash-link" href="#depool-fees" title="Direct link to heading">​</a></h5><p>All staking commands are subject to an additional fee (by default 0.5 evers), that is partially spent to pay for DePool executing the command. The change is then returned to the sender. This value can be adjusted in TONOS-CLI <a href="#configure-tonos-cli-for-depool-operations">config</a>.</p><p>Additionally, when DePool receives the stake and rewards back from elector and processes the funds of participants, it uses the rewards to top up its balance:</p><ol><li>first to <code>m_balanceThreshold</code> = DePool&#x27;s balance at the time of <a href="#61-deploy-depool-contract-to-the-basechain">deployment</a> - 5 evers</li><li>then it takes <code>retOrReinvFee*(N+1)</code> tokens, where N is the number of participants.<code>retOrReinvFee</code> is set to 0,04 evers in the current version of DePool and can only be changed in contract code. It can be viewed through <code>getDePoolInfo</code> <a href="#getdepoolinfo">get-method</a>.</li></ol><p>These two fees cover DePool&#x27;s operational expenses and are deducted only from validation rewards. If DePool doesn&#x27;t receive rewards in a round, it will not be able to top up its balance.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-tonos-cli-for-depool-operations">Configure TONOS-CLI for DePool operations<a class="hash-link" href="#configure-tonos-cli-for-depool-operations" title="Direct link to heading">​</a></h4><p>For all commands listed below, the DePool address, the wallet making the stake, the amount of fee to pay for DePool&#x27;s services and the path to the keyfile/seed phrase may be specified in the TONOS-CLI config file in advance:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli config --addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --keys </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path_to_keys or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --depool_fee </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_fee</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>--addr &lt;address&gt;</code> - the address of the DePool</p><p><code>--wallet &lt;address&gt;</code> - the address of the wallet making the stake</p><p><code>&lt;path_to_keys or seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes</p><p><code>--depool_fee &lt;depool_fee&gt;</code> - value in evers, that is additionally attached to the message sent to the DePool to cover its fees. Change is returned to the sender. The default value, used if this option isn&#x27;t configured, is <strong>0.5 evers</strong>. It should be increased only if it proves insufficient and DePool begins to run out of gas on execution.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli config --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --keys </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><span class="token plain"> --depool_fee </span><span class="token number" style="color:#36acaa">0.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case all commands allow to omit <code>--addr</code>, <code>--wallet</code> and <code>--sign</code> options.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-stakes">Deposit stakes<a class="hash-link" href="#deposit-stakes" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-ordinary-stake">1) Ordinary stake<a class="hash-link" href="#1-ordinary-stake" title="Direct link to heading">​</a></h5><p>Ordinary stake is the most basic type of stake. It and the rewards from it belong to the wallet that made it.</p><p>It is invested completely in the current pooling round, and can be reinvested every second round (as odd and even rounds are handled by DePool separately). Thus to participate in every DePool round, an ordinary stake should be invested in two consecutive rounds, so it can later be reinvested in odd and even rounds both.</p><p>Ordinary stake must exceed DePool minimum stake. Check <a href="#getdepoolinfo">DePool Info get-method</a> to find out the minimum stake.</p><p>Use the following command to make an ordinary stake:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake ordinary </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet making a stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake ordinary --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">100.5</span><span class="token plain"> --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-vesting-stake">2) Vesting stake<a class="hash-link" href="#2-vesting-stake" title="Direct link to heading">​</a></h5><p>A wallet can make a vesting stake and define a target participant address (beneficiary) who will own this stake, provided the beneficiary has previously indicated the donor as its vesting donor address. This condition prevents unauthorized vestings from blocking the beneficiary from receiving an expected vesting stake from a known address.</p><p><strong>To receive a vesting stake beneficiary must:</strong></p><ul><li><p>already have an ordinary stake of any amount in the DePool (it can be made by the participant itself, or <a href="#transfer-stakes">transferred</a> from another participant)</p></li><li><p>set the donor address with the following command:</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> donor vesting </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">beneficiary_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --donor </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">donor_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;beneficiary_address&gt;</code> - address of the beneficiary wallet .</p><p><code>&lt;donor_address&gt;</code> - address of the donor wallet.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the beneficiary wallet, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3187b4d738d69776948ca8543cb7d250c042d7aad1e0aa244d247531590b9147 donor vesting --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --donor </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:279afdbd7b2cbf9e65a5d204635a8630aec2baec60916ffdc9c79a09d2d2893d --sign </span><span class="token string" style="color:#e3116c">&quot;deal hazard oak major glory meat robust teach crush plastic point edge&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Not the whole stake is available to the beneficiary at once. Instead it is split into parts and the next part of stake becomes available to the beneficiary (is transformed into beneficiary&#x27;s ordinary stake) at the end of the round that coincides with the end of the next withdrawal period. Rewards from vesting stake are always added to the beneficiary&#x27;s ordinary stake. To withdraw these funds, beneficiary should use one of the <a href="#withdraw-stakes">withdrawal functions</a>.</p><p>Please note, that the vesting stake is split into two equal parts by the DePool, to be used in both odd and even rounds, so to ensure DePool can participate in elections with just one vesting stake where validator wallet is beneficiary, the stake should exceed <code>validatorAssurance</code><em>2. Similarly, to ensure any vesting stake is accepted, make sure it exceeds <code>minStake</code> </em>2.</p><p><strong>Vesting for validator beneficiaries is subject to additional rules:</strong> At the end of every withdrawal period, the part of the vesting stake to be released is divided proportionally into 2 parts - for rounds in this period when DePool successfully completed validation and received a reward (without slashing) and for rounds when DePool missed elections or was slashed. The portion of the stake corresponding to the successful rounds is sent to the validator, while the portion corresponding to the failed rounds is returned to the vesting stake donor. For example, if there were 100 rounds within the withdrawal period, and DePool successfully completed 80 of them, missed elections in 5 more and was slashed in the remaining 15, the validator will receive 80% of the unlocked part of the vesting stake, and the stake donor will get back 20% of it.</p><p><strong>Donor uses the following command to make a vesting stake:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake vesting </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --total </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">days</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --withdrawal </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">days</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --beneficiary </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet making a stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>total &lt;days&gt;</code> - total period, for which the stake is made.</p><p><code>withdrawal &lt;days&gt;</code> - withdrawal period (each time a withdrawal period ends, a portion of the stake is released to the beneficiary).</p><blockquote><p>There are limitations for period settings: <code>withdrawalPeriod</code> should be &lt;= <code>totalPeriod</code>, <code>totalPeriod</code> cannot exceed 18 years or be &lt;=0, <code>totalPeriod</code> should be exactly divisible by withdrawalPeriod.
<code>beneficiary &lt;address&gt;</code> - address of the wallet that will receive rewards from the stake and, in parts over time, the vesting stake itself. Cannot be the same as the wallet making the stake.</p></blockquote><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake vesting --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> --total </span><span class="token number" style="color:#36acaa">360</span><span class="token plain"> --withdrawal </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> --beneficiary </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3 --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong>: Each participant can be the beneficiary of only one vesting stake. Once the current vesting stake expires, another can be made for the participant.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-lock-stake">3) Lock stake<a class="hash-link" href="#3-lock-stake" title="Direct link to heading">​</a></h5></blockquote><p>A wallet can make a lock stake, in which it locks its funds in DePool for a defined period, but rewards from this stake will be payed to another target participant (beneficiary). As with vesting, the beneficiary has to indicate the donor as its lock donor address before receiving a lock stake. This condition prevents unauthorized lock stakes from blocking the beneficiary from receiving an expected lock stake from a known address.</p><p><strong>To receive a lock stake beneficiary must:</strong></p><ul><li>already have an ordinary stake of any amount in the DePool (it can be made by the participant itself, or <a href="#transfer-stakes">transferred</a> from another participant)</li><li>set the donor address with the following command:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> donor lock </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">beneficiary_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --donor </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">donor_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;beneficiary_address&gt;</code> - address of the beneficiary wallet .</p><p><code>&lt;donor_address&gt;</code> - address of the donor wallet.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the beneficiary wallet, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3187b4d738d69776948ca8543cb7d250c042d7aad1e0aa244d247531590b9147 donor lock --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:255a3ad9dfa8aa4f3481856aafc7d79f47d50205190bd56147138740e9b177f3 --donor </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:279afdbd7b2cbf9e65a5d204635a8630aec2baec60916ffdc9c79a09d2d2893d --sign </span><span class="token string" style="color:#e3116c">&quot;deal hazard oak major glory meat robust teach crush plastic point edge&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Like vesting stake, lock stake can be configured to be unlocked in parts at the end of each round that coincides with the end of the next withdrawal period. At the end of each period a part of the Lock Stake is returned to the wallet which locked it. The rewards of a lock stake are always added to the ordinary stake of the beneficiary. To withdraw these funds, beneficiary should use one of the <a href="#withdraw-stakes">withdrawal functions</a>.</p><p>Please note that the lock stake is split into two equal parts by the DePool, to be used in both odd and even rounds, so to ensure DePool can participate in elections with just one lock stake where validator wallet is beneficiary, the stake should equal <code>validatorAssurance</code> <em>2. Similarly, to ensure any vesting stake is accepted, make sure it exceeds <code>minStake</code> </em>2.</p><p><strong>Donor uses the following command to make a lock stake:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake lock </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --total </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">days</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --withdrawal </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">days</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --beneficiary </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet making a stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>total &lt;days&gt;</code> - total period, for which the stake is made. </p><p><code>withdrawal &lt;days&gt;</code> - withdrawal period (each time a withdrawal period ends, a portion of the stake is returned to the wallet that made the stake). </p><blockquote><p>There are limitations for period settings: <code>withdrawalPeriod</code> should be &lt;= <code>totalPeriod</code>, <code>totalPeriod</code> cannot exceed 18 years or be &lt;=0, <code>totalPeriod</code> should be exactly divisible by withdrawalPeriod.
<code>beneficiary &lt;address&gt;</code> - address of the wallet that will receive rewards from the stake. Cannot be the same as the wallet making the stake.</p></blockquote><p><code>key_file or seed_phrase</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake lock --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> --total </span><span class="token number" style="color:#36acaa">360</span><span class="token plain"> --withdrawal </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> --beneficiary </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:f22e02a1240dd4b5201f8740c38f2baf5afac3cedf8f97f3bd7cbaf23c7261e3 --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong>: Each participant can be the beneficiary of only one lock stake. Once the current lock stake expires, another can be made for the participant.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-stakes">Remove stakes<a class="hash-link" href="#remove-stakes" title="Direct link to heading">​</a></h4></blockquote><p>This command removes an ordinary stake from a pooling round (while it has not been staked in the Elector yet):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake remove </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake remove --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-stakes">Transfer stakes<a class="hash-link" href="#transfer-stakes" title="Direct link to heading">​</a></h4><p>The following command assigns an existing <a href="#1-ordinary-stake">ordinary stake</a> or its part to another participant wallet. If the entirety of the stake is transferred, the transferring wallet is removed from the list of participants in the DePool. If the receiving wallet isn&#x27;t listed among the participants, it will become a participant as the result of the command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake transfer </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --dest </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>dest &lt;address&gt;</code> - address of the new owner of the stake.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake transfer --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> --dest </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong>: Stakes cannot be transferred from or to DePool&#x27;s validator wallet, and between any wallets during round completion step (RoundStep = Completing = 8).</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="withdraw-stakes">Withdraw Stakes<a class="hash-link" href="#withdraw-stakes" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-withdraw-entire-stake">1) Withdraw entire stake<a class="hash-link" href="#1-withdraw-entire-stake" title="Direct link to heading">​</a></h5><p>The following command allows to withdraw an <a href="#1-ordinary-stake">ordinary stake</a> to the wallet that owns it, as soon as the stake becomes available. Use <code>withdraw on</code> to receive the stake, once it&#x27;s unlocked. If you then make another stake, and want to keep reinvesting it every round, run the command with <code>withdraw off</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> withdraw on </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> off </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet that made the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace withdraw on --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-withdraw-part-of-the-stake">2) Withdraw part of the stake<a class="hash-link" href="#2-withdraw-part-of-the-stake" title="Direct link to heading">​</a></h5><p>The following command allows to withdraw part of an <a href="#1-ordinary-stake">ordinary stake</a> to the wallet that owns it, as soon as the stake becomes available. If, as result of this withdrawal, participant&#x27;s ordinary stake becomes less than <code>minStake</code>, then participant&#x27;s whole stake is sent to participant.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> stake withdrawPart </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --value </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 10.5</code>, which means the value is 10,5 evers.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet that made the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace stake withdrawPart --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --value </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reinvest-stakes">Reinvest Stakes<a class="hash-link" href="#reinvest-stakes" title="Direct link to heading">​</a></h4><p><a href="#1-ordinary-stake">Ordinary</a> stake reinvestment is controlled by the DePool <a href="https://docs.ton.dev/86757ecb2/p/45d6eb-depool-specifications/t/82306f" target="_blank" rel="noopener noreferrer">reinvest flag</a>. By default this flag is set to <code>yes</code>, and the the participant&#x27;s available ordinary stake will be reinvested every round, no additional action required.
It gets set to <code>no</code> when <a href="#1-withdraw-entire-stake">withdrawing the entire stake</a>. After stake withdrawal it remains set to <code>no</code>.
To re-enable ordinary stake reinvesting after withdrawing a stake, run the withdraw command with option <code>off</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> withdraw off </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet that made the stake, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace withdraw off --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note:</strong>
<a href="#2-withdraw-part-of-the-stake">Withdrawing a part of the stake</a> does not affect the reinvest flag.
<a href="#3-lock-stake">Lock</a> and <a href="#2-vesting-stake">vesting</a> stakes are reinvested according to their initial settings for the full duration of the staking period. There is no way to change these settings once lock and vesting stakes are made.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-check--donors-and-stakes-in-the-depool">9. Check  Donors and Stakes in the DePool<a class="hash-link" href="#9-check--donors-and-stakes-in-the-depool" title="Direct link to heading">​</a></h3><p>After the stake is made, you can check its status in the DePool with the <code>getParticipantInfo</code> get-method:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getParticipantInfo </span><span class="token string" style="color:#e3116c">&#x27;{&quot;addr&quot;:&quot;&lt;msig_address&gt;&quot;}&#x27;</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><blockquote><p><strong>Note</strong>: if you are expecting a lock or vesting stake, make sure the donor address is specified in your <code>lockDonor</code> or <code>vestingDonor</code> parameters.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-set-up-validator-script">10. Set Up Validator Script<a class="hash-link" href="#10-set-up-validator-script" title="Direct link to heading">​</a></h3><p>Once the the validator has accumulated a stake sufficient to participate in elections, (at least <code>validatorAssurance</code>), this stake needs to be signed by the node. This should be done through a validator script.</p><p>The main function that the validator script should regularly perform is to send signed election requests to the DePool, which will forward the accumulated stake to the Elector contract on the validator&#x27;s behalf. The Election request should be generated with the proxy address for the current round as the requesting validator wallet.</p><blockquote><p>When participating in elections through a DePool contract, the validator script handles only the creation and sending of the node election request, as <strong>all activities regarding stakes and rewards are handled at the level of the DePool</strong>.
<strong>Note</strong>, that the validator wallet should have a small sum of tokens (~20 Evers) available at all times to reliably send election requests to DePool. Each election request costs ~ 1 Ton.
<strong>Note</strong>: Do not forget to <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig#47-create-transaction-confirmation-online" target="_blank" rel="noopener noreferrer">confirm</a> the election request transactions sent out by the script with the necessary amount of validator wallet custodians.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-c-node">For C++ node<a class="hash-link" href="#for-c-node" title="Direct link to heading">​</a></h4><p>Working examples of such a script can be found here: for the <a href="https://github.com/tonlabs/main.ton.dev/blob/master/scripts/validator_depool.sh" target="_blank" rel="noopener noreferrer">main Everscale</a> network, and for the <a href="https://github.com/tonlabs/net.ton.dev/blob/master/scripts/validator_depool.sh" target="_blank" rel="noopener noreferrer">devnet</a>.</p><blockquote><p><strong>Important</strong>: If you are setting up DePool validator script on top of a <strong>C++ node</strong>, that was previously functioning under a regular validator script, you should first disable the regular script (validator_msig.sh) and only set up the DePool validator script (validator_depool.sh) for the next elections. Two validator scripts should never run at the same time, as this creates unpredictable behavior.
It is recommended to run the script periodically, for example with <code>cron</code> utility. Example:</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@hourly        script --return --quiet --append --command </span><span class="token string" style="color:#e3116c">&quot;cd /scripts/ &amp;&amp; ./validator_depool.sh 2&gt;&amp;1&quot;</span><span class="token plain"> /var/ton-work/validator_depool.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is possible to configure the script to monitor the DePool status through the available get-methods, such as <code>getParticipantInfo</code>, <code>getRounds</code>, <code>getDePoolInfo</code>, <code>getParticipants</code> (see <a href="#using-get-methods">get-methods section</a> for details) and through <a href="#using-depool-events">view DePool events command</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-rust-node">For Rust Node<a class="hash-link" href="#for-rust-node" title="Direct link to heading">​</a></h4><p>For rustnet, the script is set up automatically during node deployment.</p><blockquote><p><strong>Important</strong>: If you are switching a <strong>rust validator node</strong> from direct staking to DePool, make sure to delete the current node build, set the DePool validator variable and rebuild it from scratch.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-maintain-positive-balance-on-depool-and-supplementary-contracts">11. Maintain Positive Balance on DePool and Supplementary Contracts<a class="hash-link" href="#11-maintain-positive-balance-on-depool-and-supplementary-contracts" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="depool-balance">DePool Balance<a class="hash-link" href="#depool-balance" title="Direct link to heading">​</a></h4><p>Normally the DePool receives sufficient funds for its operations <a href="#depool-fees">from validation rewards</a>. They go to DePool&#x27;s own balance, which is completely separate from the staking pool and the funds on it are never staked.</p><p>However, a situation where the DePool spends its funds on regular operations, but does not receive enough rewards (for example, fails to participate in the elections or loses them), is possible.</p><p>DePool balance can be viewed or through <code>getDePoolBalance</code> <a href="#getdepoolbalance">get-method</a> in TONOS-CLI (requires <code>DePool.abi.json</code> file):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getDePoolBalance </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, DePool emits the <code>TooLowDePoolBalance</code> <a href="#using-depool-events">event</a> when its balance drops too low to perform state update operations (below <code>CRITICAL_THRESHOLD</code> which equals 10 evers).</p><p>Replenish the balance to at least 20 evers from any multisignature wallet with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> replenish --value *number* </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--wallet </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key_file or seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p>all <code>--value</code> parameters must be defined in evers, like this: <code>--value 150.5</code>, which means the value is 150,5 evers.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p><code>&lt;key_file or seed_phrase&gt;</code> - either the keyfile for the wallet, or the seed phrase in quotes.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace replenish --value </span><span class="token number" style="color:#36acaa">150</span><span class="token plain"> --wallet </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1b91c010f35b1f5b42a05ad98eb2df80c302c37df69651e1f5ac9c69b7e90d4e --sign </span><span class="token string" style="color:#e3116c">&quot;dizzy modify exotic daring gloom rival pipe disagree again film neck fuel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: These funds do not go towards any stake. They are transferred to the DePool contract itself and are spent on its operational expenses.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="proxy-balance">Proxy Balance<a class="hash-link" href="#proxy-balance" title="Direct link to heading">​</a></h4><p>The balance of ~ 2 Evers on the proxies should be maintained for the full duration of DePool existence.</p><p><strong>Generally proxies receive fees for their services automatically, but if they run out of funds for any reason, DePool might miss elections.</strong></p><p>As the proxies are deployed by the DePool itself, you have to run the <code>getDePoolInfo</code> get-method to find out their addresses:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getDePoolInfo </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The balance of the proxies can be viewed on the <a href="https://ever.live/main" target="_blank" rel="noopener noreferrer">ever.live</a> blockchain explorer by searching the proxy addresses, or through TONOS-CLI commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli account </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">proxy0_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli account </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">proxy1_address</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If necessary, it can be topped up with a <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig#46-create-transaction-online" target="_blank" rel="noopener noreferrer">transaction</a> from any multisignature wallet:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;&lt;proxy_address&gt;&quot;,&quot;value&quot;:*number*,&quot;bounce&quot;:&quot;true&quot;,&quot;allBalance&quot;:&quot;false&quot;,&quot;payload&quot;:&quot;&quot;}&#x27;</span><span class="token plain"> --abi </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">MultisigWallet.abi.json</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_seed_or_keyfile</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;wallet_address&gt;</code> - is the address of the wallet, from which you are making the transaction</p><p><code>&lt;proxy_address&gt;</code> - address of one of the proxies, calculated on step 4.</p><p><code>&quot;value&quot;:*number*</code> - the amount of coins to be transferred (in nanotokens).</p><p><code>&lt;MultisigWallet.abi.json&gt;</code> - the ABI file of the contract, from which you are making the transaction (for validator wallets - usually <code>SafeMultisigWallet.abi.json</code>)</p><p><code>&lt;wallet_seed_or_keyfile&gt;</code> - either the seed phrase in double quotes, or the path to the keyfile for the wallet, from which you are making the transaction</p><blockquote><p><strong>Note</strong>: If the proxy balance dips too low to operate and it fails to deliver messages between DePool and elector, DePool will emit one of the following <a href="#using-depool-events">events</a>: <code>ProxyHasRejectedTheStake</code> (if proxy cannot pass the stake on to elector) or <code>ProxyHasRejectedRecoverRequest</code> (if proxy cannot retrieve stake from elector). To reestablish operations you need to top up the proxy balance, and then call the DePool <code>ticktock</code> function by <a href="#7-configure-depool-state-update-method">any available means</a>. These measures should be taken as soon as possible, however, as DePool risks missing elections if it cannot communicate with elector on time.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="withdrawing-excess-funds">Withdrawing excess funds<a class="hash-link" href="#withdrawing-excess-funds" title="Direct link to heading">​</a></h5><p>If proxy accumulates excess funds over time, they can be withdrawn using a transaction from the validator wallet with a specific payload:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">validator_wallet</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;&lt;proxy_address&gt;&quot;,&quot;value&quot;: 500000000,&quot;bounce&quot;: true,&quot;allBalance&quot;: false, &quot;payload&quot;: &quot;te6ccgEBAQEABgAACFBK1Rc=&quot;}&#x27;</span><span class="token plain"> --abi </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">MultisigWallet.abi.json</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">seed_phrase_or_key_file</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>&lt;validator_wallet&gt;</code> - address of the validator wallet.</p><p><code>&lt;proxy_address&gt;</code> - address of the proxy contract.</p><p><code>&lt;MultisigWallet.abi.json&gt;</code> - validator wallet ABI file (usually SafeMultisigWallet.abi.json).</p><p><code>&lt;seed_phrase_or_key_file&gt;</code> - either the keyfile for the validator wallet, or the seed phrase in quotes.</p><p><code>payload</code> contains the message calling the <code>withdrawExcessTons()</code> function of the proxy contract.</p><p><code>value</code>, <code>bounce</code>, <code>allBalance</code> and <code>payload</code> values should not be modified. Change from the 0.5 evers not spent on the transaction will be returned.</p><p>Proxy will send all excess funds to the validator wallet, reserving only its minimal balance of 2 evers for itself.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:303c1aa8110dc5c543687c6bba699add7a7faf2ed55737f494f78d1c51c6b8d4 submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;-1:d16999c37c82523d1931011471967ae9e06ee53c1cafcacc8f6d3bee34f15044&quot;,&quot;value&quot;: 500000000,&quot;bounce&quot;: true,&quot;allBalance&quot;: false, &quot;payload&quot;: &quot;te6ccgEBAQEABgAACFBK1Rc=&quot;}&#x27;</span><span class="token plain"> --abi SafeMultisigWallet.abi.json --sign </span><span class="token string" style="color:#e3116c">&quot;kick jewel fiber because cushion brush elegant fox bus surround pigeon divide&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="depool-helper-balance">DePool Helper Balance<a class="hash-link" href="#depool-helper-balance" title="Direct link to heading">​</a></h4><p>The balance of ~ 100 Evers on the helper contract should be maintained for the full duration of DePool existence.</p><p>The balance of the helper can be viewed on the <a href="https://ever.live/main" target="_blank" rel="noopener noreferrer">ever.live</a> blockchain explorer by searching the helper address, or through TONOS-CLI command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli account </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">helper_address</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Helper balance should be topped up regularly. Without funds on the Helper contract, DePool will not be able to function regularly.</p><p>To top up, send a <a href="https://github.com/tonlabs/ton-labs-contracts/tree/master/solidity/safemultisig#46-create-transaction-online" target="_blank" rel="noopener noreferrer">transaction</a> from any multisignature wallet:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;&lt;helper_address&gt;&quot;,&quot;value&quot;:*number*,&quot;bounce&quot;:&quot;true&quot;,&quot;allBalance&quot;:&quot;false&quot;,&quot;payload&quot;:&quot;&quot;}&#x27;</span><span class="token plain"> --abi </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">MultisigWallet.abi.json</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">wallet_seed_or_keyfile</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;wallet_address&gt;</code> - is the address of the wallet, from which you are making the transaction.</p><p><code>&lt;helper_address&gt;</code> - address of the helper, calculated on step 4.</p><p><code>&quot;value&quot;:*number*</code> - the amount of coins to be transferred (in nanotokens).</p><p><code>&lt;MultisigWallet.abi.json&gt;</code> - the ABI file of the contract, from which you are making the transaction (for validator wallets - usually <code>SafeMultisigWallet.abi.json</code>).</p><p><code>&lt;wallet_seed_or_keyfile&gt;</code> - either the seed phrase in double quotes, or the path to the keyfile for the wallet, from which you are making the transaction.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="validator-wallet-balance">Validator Wallet Balance<a class="hash-link" href="#validator-wallet-balance" title="Direct link to heading">​</a></h4><p>Validator wallet will receive a fraction of any DePool round rewards directly, so with a successful DePool setup, it should receive regular income.</p><p>In general, the validator wallet should have a small sum of tokens (~20 Evers) available at all times to reliably send election requests to DePool. Each election request costs ~ 1 Ton.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-check-depool-status-in-the-elections">12. Check DePool Status in the Elections<a class="hash-link" href="#12-check-depool-status-in-the-elections" title="Direct link to heading">​</a></h3><p>Once everything has been configured properly, <a href="#8-make-stakes">stakes made</a>, and election request sent by the <a href="#10-set-up-validator-script">validator script</a>, you can monitor the operation of the DePool and its validator node through various channels.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="on-everlive">On ever.live<a class="hash-link" href="#on-everlive" title="Direct link to heading">​</a></h4><p>Nodes currently participating in an open election are displayed on <a href="https://ever.live/validators?section=all" target="_blank" rel="noopener noreferrer">ever.live</a> in the <strong>Next</strong> validators section until election end.</p><p>When the elections end, the newly elected set of validators is posted on <a href="https://ever.live/validators?section=all" target="_blank" rel="noopener noreferrer">ever.live</a> in the <strong>Next</strong> validators section.</p><p>When the new validator set becomes active, it is moved to the <strong>Current</strong> section. At that point you will be able to see new blocks signed by the validator node on its validator page.</p><p>To find the pages of your validator and DePool, you can search for the validator wallet or for the DePool address on <a href="https://ever.live/" target="_blank" rel="noopener noreferrer">ever.live</a>. All validator-related pages are linked to each other.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-depool-events">Using DePool Events<a class="hash-link" href="#using-depool-events" title="Direct link to heading">​</a></h4><p>TONOS-CLI supports DePool event monitoring.</p><p>To print out all events, or, optionally, all events since a specific time use the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> events </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--since </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">utime</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;utime&gt;</code> - unixtime, since which the events are displayed. If <code>-since</code> is omitted, all DePool events are printed.</p><p>To wait for a new event use the following command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> events --wait-one</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p>TONOS-CLI waits until new event will be emitted and then prints it to the stdout.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool --addr </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace events --wait-one</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>List of possible events:</strong></p><ol><li><code>DePoolClosed()</code> - event emitted when DePool is closing.</li><li><code>RoundStakeIsAccepted(uint64 queryId, uint32 comment)</code> - event emitted when Elector accepts the stake.</li><li><code>RoundStakeIsRejected(uint64 queryId, uint32 comment)</code> - event emitted when Elector rejects the stake.</li><li><code>ProxyHasRejectedTheStake(uint64 queryId)</code> - event is emitted if stake is returned by proxy because too low balance of proxy contract.</li><li><code>ProxyHasRejectedRecoverRequest(uint64 roundId)</code> - event is emitted if stake cannot be returned from elector because too low balance of proxy contract.</li><li><code>RoundCompleted(TruncatedRound round)</code> - event emitted when the round was completed.</li><li><code>StakeSigningRequested(uint32 electionId, address proxy)</code> - event emitted when round switches from pooling to election indicating that DePool is waiting for signed election request from validator wallet.</li><li><code>TooLowDePoolBalance(uint replenishment)</code> - event emitted when DePool&#x27;s own balance becomes too low to perform state update operations (below <code>CRITICAL_THRESHOLD</code> which equals 10 evers). <code>replenishment</code> indicates the minimal value required to resume operations. It&#x27;s recommended to replenish the balance to 20 evers or more if this event occurs.</li><li><code>RewardFractionsChanged(uint8 validator, uint8 participants)</code> - event emitted when contract owner changes reward fractions. validator - validator&#x27;s reward fraction. participants - participants&#x27; reward fraction.</li><li><code>InternalError(uint16 ec)</code> - emitted whenever an internal error occurs. Contains error code.</li></ol><p>Events command output example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">event ee4f1e53997f7c5cd3a03511f8ed8e5715ead58e9645b4c99f91b56f0a4bd07b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RoundStakeIsAccepted </span><span class="token number" style="color:#36acaa">1611665778</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-01-26 </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:56:18.000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;queryId&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1611665701&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event 14ed78bb338cc94b2e1165f71de732d092ff203941e027bfe2b5e20bdc0a90ee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StakeSigningRequested </span><span class="token number" style="color:#36acaa">1611665471</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-01-26 </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:51:11.000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;electionId&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1611666134&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;proxy&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;-1:1ef217ee3f9aa5cd2202919c97e1b61caddcb1a80f450d82990a06b918a75d82&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event c884939b93dcf846ab43f1bbc36977fabe57bf376fa3638d95b2e7127ed4f0c2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RoundCompleted </span><span class="token number" style="color:#36acaa">1611665471</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-01-26 </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:51:11.000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;round&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;159&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;supposedElectedAt&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1611664334&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;unfreeze&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;stakeHeldFor&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;900&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;vsetHashInElectionPhase&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0xc09caf4efff6cabff6185754d2150bc11d94098f97ea146a617e9d0d90cecc76&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;step&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;8&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;completionReason&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;stake&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;recoveredStake&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;unused&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;isValidatorStakeCompleted&quot;</span><span class="token plain">:false,</span><span class="token string" style="color:#e3116c">&quot;rewards&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;participantQty&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;validatorStake&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;validatorRemainingStake&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;handledStakesAndRewards&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-get-methods">Using get-methods<a class="hash-link" href="#using-get-methods" title="Direct link to heading">​</a></h4><p>DePool contract supports a number of get-methods, which can be used to monitor its status and the status of participants and stakes in the pool.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getparticipantinfoaddress-addr"><code>getParticipantInfo(address addr)</code><a class="hash-link" href="#getparticipantinfoaddress-addr" title="Direct link to heading">​</a></h5><p>Returns information about a specific participant in all investment rounds.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getParticipantInfo </span><span class="token string" style="color:#e3116c">&#x27;{&quot;addr&quot;:&quot;&lt;msig_address&gt;&quot;}&#x27;</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where</p><p><code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><p><code>&lt;msig_address&gt;</code> - address of the wallet that made the stake.</p><p>Output example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Result: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;total&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;107043197878158&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;withdrawValue&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;reinvest&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;reward&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5837197878158&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;stakes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;160&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;104517866677409&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;161&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;vestings&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;locks&quot;</span><span class="token builtin class-name">:</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;160&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;lastWithdrawalTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1604655095&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:6cde10682ab1f72f267ce4a47a439db6473be65ba87dc846556fbabdba8bfb78&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;remainingAmount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100000500000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;withdrawalPeriod&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1728000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;withdrawalValue&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100000500000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;161&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;lastWithdrawalTime&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1604655095&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:6cde10682ab1f72f267ce4a47a439db6473be65ba87dc846556fbabdba8bfb78&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;remainingAmount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100000500000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;withdrawalPeriod&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1728000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;withdrawalValue&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100000500000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;vestingDonor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:6cde10682ab1f72f267ce4a47a439db6473be65ba87dc846556fbabdba8bfb78&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;lockDonor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:6cde10682ab1f72f267ce4a47a439db6473be65ba87dc846556fbabdba8bfb78&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The participant parameters displayed by the get-method are the following:
<code>total</code>: participant&#x27;s total stake (in nanoevers).
<code>withdrawValue</code>: the value to be withdrawn when the funds become available.
<code>reinvest</code>: whether the ordinary stake of the participant should be continuously <a href="#reinvest-stakes">reinvested</a>.
<code>reward</code>: The total rewards earned by participant in the current DePool (in nanoevers).
<code>stakes</code>: the <a href="#1-ordinary-stake">ordinary</a> stakes in the current active rounds (in nanoevers).
<code>locks</code> and <code>vestings</code>: participant&#x27;s <a href="#3-lock-stake">lock</a> and <a href="#2-vesting-stake">vesting</a> stake, each split into two neighboring rounds. There can be only one of each, split equally into two entries.
The parameters of the lock and vesting stakes are: </p><ul><li><code>lastWithdrawalTime</code>: last time a withdrawal period ended and a part of the stake was unlocked (in unixtime). </li><li><code>owner</code>: the address that made the lock or vesting stake on behalf of the participant. </li><li><code>remainingAmount</code>: the current amount staked in this round (in nanoevers).</li><li><code>withdrawalPeriod</code>: the period in seconds, after which the next part of the stake gets unlocked. </li><li><code>withdrawalValue</code>: the value that is unlocked every withdrawal period (in nanoevers).
<code>lockDonor</code> and <code>vestingDonor</code> are the addresses set by the participant to be their <a href="#3-lock-stake">lock</a> and <a href="#2-vesting-stake">vesting</a> donors, respectively.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getdepoolinfo"><code>getDePoolInfo()</code><a class="hash-link" href="#getdepoolinfo" title="Direct link to heading">​</a></h5><p>Returns DePool configuration parameters and constants (supplementary contract addresses, minimal stake settings and fees for various actions).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getDePoolInfo </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool contract.
Output example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Result: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;poolClosed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;minStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10000000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;validatorAssurance&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100000000000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;participantRewardFraction&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;validatorRewardFraction&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;balanceThreshold&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;15858929993&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;validatorWallet&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:303c1aa8110dc5c543687c6bba699add7a7faf2ed55737f494f78d1c51c6b8d4&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;proxies&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;-1:1ef217ee3f9aa5cd2202919c97e1b61caddcb1a80f450d82990a06b918a75d82&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;-1:d16999c37c82523d1931011471967ae9e06ee53c1cafcacc8f6d3bee34f15044&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;stakeFee&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;500000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;retOrReinvFee&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;40000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;proxyFee&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;90000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The round parameters displayed by the get-method are the following:
<code>poolClosed</code>: whether DePool was <a href="#14-optional-close-depool">closed</a>.
<code>minStake</code>: the minimal stake the DePool accepts from participants (in nanoevers). Set during <a href="#61-deploy-depool-contract-to-the-basechain">deployment</a>.
<code>validatorAssurance</code>: required validator stake (in nanoevers). Also set during <a href="#61-deploy-depool-contract-to-the-basechain">deployment</a>.
<code>participantRewardFraction</code>: percentage of the reward that goes to all participants. Also set during <a href="#61-deploy-depool-contract-to-the-basechain">deployment</a>.
<code>validatorRewardFraction</code>: the fraction of the total reward that goes directly to validator. Equals 100% - <code>participantRewardFraction</code>.
<code>validatorWallet</code>: the address of the validator wallet. Also set during <a href="#61-deploy-depool-contract-to-the-basechain">deployment</a>.
<code>proxies</code>: the two proxies on the masterchain that DePool uses to communicate with elector. They are deployed by the DePool itself.
<code>stakeFee</code>: fee for <a href="#8-make-stakes">staking operations</a> (in nanoevers).
<code>retOrReinvFee</code>: the fee deducted from every participant&#x27;s stake and rewards during reward distribution at the end of the round (in nanoevers).
<code>proxyFee</code>: the fee that proxies take for any messages passed through them (in nanoevers). </p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="getrounds"><code>getRounds()</code><a class="hash-link" href="#getrounds" title="Direct link to heading">​</a></h5><p>Returns information about all rounds (step, total stake, stakeholder count, round id).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getRounds </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool contract.
Output example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Result: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;rounds&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;159&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;159&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;supposedElectedAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1611664334&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unfreeze&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stakeHeldFor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;900&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;vsetHashInElectionPhase&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0xc09caf4efff6cabff6185754d2150bc11d94098f97ea146a617e9d0d90cecc76&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;step&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;9&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;completionReason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;recoveredStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unused&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;isValidatorStakeCompleted&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;participantQty&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorRemainingStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;handledStakesAndRewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;161&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;161&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;supposedElectedAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unfreeze&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4294967295&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stakeHeldFor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;vsetHashInElectionPhase&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;step&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;completionReason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2525331200749&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;recoveredStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unused&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;isValidatorStakeCompleted&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;participantQty&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorRemainingStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;handledStakesAndRewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;160&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;160&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;supposedElectedAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1611666134&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unfreeze&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4294967295&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stakeHeldFor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;900&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;vsetHashInElectionPhase&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x7965b01da2b778404bd5b9e6dc5a5f6d1e4ce15a78284ebec78ed86a8852d5f9&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;step&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;6&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;completionReason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;205352016359392&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;recoveredStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unused&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;isValidatorStakeCompleted&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;participantQty&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;104517866677409&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorRemainingStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;handledStakesAndRewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;162&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;162&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;supposedElectedAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unfreeze&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4294967295&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stakeHeldFor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;vsetHashInElectionPhase&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;step&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;completionReason&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;stake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;recoveredStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;unused&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;isValidatorStakeCompleted&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;participantQty&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;validatorRemainingStake&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;handledStakesAndRewards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>id</code>: round ID. It&#x27;s also displayed above each round. At DePool deployment, the first four rounds are created: 0, 1, 2 and 3. Whenever one round completes and is removed from the DePool, a new one is created, its ID incremented by 1: when 0 is removed, 4 is created, etc.
<code>supposedElectedAt</code>:  the time the validator is scheduled to start validating, if elected (in unixtime). This value remains 0, until validator elections start and DePool enters waitingValidatorRequest step of the round. Then it is set to the time the election winners will start validating.
<code>unfreeze</code>: the time the stake will be unfrozen by elector (in unixtime). This value remains 4294967295 until validation ends.
<code>stakeHeldFor</code>: the period in seconds for which stake will remain frozen in elector after validation. It&#x27;s set by the global configuration parameter p15 when validation completes.
<code>vsetHashInElectionPhase</code>: this is a system variable that holds the hash of validation set (global config parameter 34) when round was in election phase. Is set during election.
<code>step</code>: step the round is currently at. The possible steps are:</p><ul><li><strong>0</strong> - <strong>PrePooling</strong>: step reserved for receiving half of   <a href="#2-vesting-stake">vesting</a>/<a href="#3-lock-stake">lock</a> stake from participants. Nothing else happens when round is in this step.</li><li><strong>1</strong> - <strong>Pooling</strong>: DePool receives stakes from participants. Half of   <a href="#2-vesting-stake">vesting</a>/<a href="#3-lock-stake">lock</a> stakes are invested into the round in the pooling step, the other into the round in the PrePooling step. This way, the other half of these stakes is always invested into the very next round.</li><li><strong>2</strong> - <strong>WaitingValidatorRequest</strong>: waiting for <a href="#10-set-up-validator-script">election request</a> from validator. The elections have begun, it&#x27;s no longer possible to invest stakes into this round. Once election request from validator is received, DePool can participate in elections.</li><li><strong>3</strong> - <strong>WaitingIfStakeAccepted</strong>: stake has been sent to elector. Waiting for answer from elector.</li><li><strong>4</strong> - <strong>WaitingValidationStart</strong>: elector has accepted round stake. Validator is candidate. Waiting for validation to start, to know if validator won elections.</li><li><strong>5</strong> - <strong>WaitingIfValidatorWinElections</strong>: DePool has tried to recover stake in validation period to know if validator won elections. Waiting for elector answer.</li><li><strong>6</strong> - <strong>WaitingUnfreeze</strong>: DePool received elector answer and waits for the end of unfreeze period. If at this step CompletionReason!=0, then validator did not win and DePool is waiting to return/reinvest funds after the next round. Else validator won elections.</li><li><strong>7</strong> - <strong>WaitingReward</strong>: Unfreeze period has been ended. Request to recover stake has been sent to elector. Waiting for answer from elector.</li><li><strong>8</strong> - <strong>Completing</strong>: Returning or reinvesting participant stakes because round is completed.</li><li><strong>9</strong> - <strong>Completed</strong>: All stakes of the round have been returned or reinvested. At the next round rotation the round will be deleted from the DePool.
<code>completionReason</code>: the code for the reason the round was completed. Remains &quot;0&quot;, until round actually is completed. The possible reasons are:
</li><li><strong>0</strong> - Round is not completed yet.</li><li><strong>1</strong> - Pool was <a href="#14-optional-close-depool">closed</a> by owner.</li><li><strong>2</strong> - The round was one of the first two rounds after deployment: 0 or 1. These first rounds are empty and are used only to launch the round rotation mechanism. They complete with this code without performing any additional actions.</li><li><strong>3</strong> - Validator stake is less than <a href="#61-deploy-depool-contract-to-the-basechain">validatorAssurance</a>.</li><li><strong>4</strong> - Stake is rejected by elector for some reason.</li><li><strong>5</strong> - Round is completed successfully. DePool won elections, its node performed validation and it received the reward from elector.</li><li><strong>6</strong> - DePool has participated in elections but lost the elections.</li><li><strong>7</strong> - Validator is blamed during investigation phase.</li><li><strong>8</strong> - Validator sent no <a href="#10-set-up-validator-script">request</a> during election phase.
<code>stake</code>: the total stake in the current round, that is sent to elector (in nanoevers).
<code>recoveredStake</code>: the total stake returned by elector (in nanoevers).
<code>unused</code>: if the stake was cut off by the elector (this can happen if there is a significant number of election candidates with much smaller stakes), this value equals the amount cut off (in nanoevers). This amount is not lost to participants - it simply isn&#x27;t staked in this round and the rewards for the round will be proportionally smaller. If DePool did not receive a ticktock call during the validation period, this value will remain 0, even if some funds were cut off.
<code>isValidatorStakeCompleted</code>: indicates whether validator&#x27;s stake has been processed during Completing round step. Whenever participants receive rewards, validator&#x27;s stake should be processed first, as any losses the total stake sustains due to poor node rerformance are first deducted from validator&#x27;s share of the pool.
<code>rewards</code>: the total rewards that are distributed among all participants in the current round (in nanoevers). Is calculated when the stake is returned from elector.
<code>participantQty</code>: the quantity of participants in the round.
<code>validatorStake</code>: this value equals the final validator stake in the current round. It is set at the and of the Pooling step.
<code>validatorRemainingStake</code>: this value is used if validator got punished by elector for poor node performance and part of the DePool stake is lost. Then this value equals the remaining validator stake, if any (in nanoevers).
<code>handledStakesAndRewards</code>: the total quantity of stakes and rewards that were processed by the DePool during Completing step (in nanoevers).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="getparticipants"><code>getParticipants()</code><a class="hash-link" href="#getparticipants" title="Direct link to heading">​</a></h4><p>Returns list of all participants.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getParticipants </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool contract.
Output example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Result: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;participants&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;0:9fa316f41fe4e991865b80006c9d9916b2637146e9a6f346eeb25c035206c5b7&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;0:a08bb1f6c64939bcbd3d950a44d88820f0102c550bfaf49f70f2d012eeec333a&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;-1:68384476fce1d2649484912c08541a8037c36b606aca0f8cc04c043640e8dd98&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="getdepoolbalance"><code>getDePoolBalance()</code><a class="hash-link" href="#getdepoolbalance" title="Direct link to heading">​</a></h4><p>Returns DePool&#x27;s own <a href="#depool-balance">balance</a> in nanotokens (without stakes).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> getDePoolBalance </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool contract.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-optional-adjust-validator-and-participant-reward-fraction">13. (Optional) Adjust validator and participant reward fraction<a class="hash-link" href="#13-optional-adjust-validator-and-participant-reward-fraction" title="Direct link to heading">​</a></h3><p>If you want to make your DePool more attractive to potential participants, you may increase the fraction of the total reward they receive.
DePool <a href="#61-deploy-depool-contract-to-the-basechain">deployment keys</a> are required for this action. Use the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> setValidatorRewardFraction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;fraction&quot;:&lt;fraction_value&gt;}&#x27;</span><span class="token plain"> --abi DePool.abi.json --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_keyfile_or_seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool.
<code>&lt;fraction_value&gt;</code> - new value of Validators reward fraction, which should be less than previous and should not be equal to 0.
<code>&lt;depool_keyfile_or_seed_phrase&gt;</code> - DePool <a href="#61-deploy-depool-contract-to-the-basechain">deployment keyfile or its corresponding seed phrase</a>.
Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:53acdc8033cc0794125038a810d4b64e24e72add52ee866b82ade42d12cd9f02 setValidatorRewardFraction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;fraction&quot;:29}&#x27;</span><span class="token plain"> --abi DePool.abi.json --sign depool.keys.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Current validator reward fraction value can be viewed with the <code>getDePoolInfo</code> <a href="#getdepoolinfo">get-method</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-optional-close-depool">14. (Optional) Close DePool<a class="hash-link" href="#14-optional-close-depool" title="Direct link to heading">​</a></h3><p>The deployer of the DePool can close the DePool at any time. DePool <a href="#61-deploy-depool-contract-to-the-basechain">deployment keys</a> are required for this action:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> terminator </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json --sign </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_keyfile_or_seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where
<code>&lt;depool_address&gt;</code> - address of the DePool.
<code>&lt;depool_keyfile_or_seed_phrase&gt;</code> - DePool <a href="#61-deploy-depool-contract-to-the-basechain">deployment keyfile or its corresponding seed phrase</a>.
Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:37fbcb6e3279cbf5f783d61c213ed20fee16e0b1b94a48372d20a2596b700ace terminator </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePool.abi.json --sign depool.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When a DePool is closed, all the stakes invested in it are returned to their owners, as soon as they become available. <code>dePoolClosed</code> event is emitted. The closed DePool cannot be reactivated again.
To return all stakes currently locked in rounds to their owners, make sure DePool&#x27;s <a href="#7-configure-depool-state-update-method">state update function</a> is called once the current and the next validation cycles complete.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rewards-distribution">Rewards Distribution<a class="hash-link" href="#rewards-distribution" title="Direct link to heading">​</a></h2><p>Every time DePool receives rewards for validation, DePool replenishes it&#x27;s own balance and  the rest is distributed according to the following rules:
1) <code>validatorRewardFraction</code>% of the reward, regardless of the validator’s share in the pool, goes directly to the validator wallet. This is the reward for maintaining the node and is intended to be used on operational expenses.
2) <code>participantRewardFraction</code>% of the reward is distributed among all participants (including the validator) proportionally to their share of the staking pool. By default these rewards are added to the ordinary stakes of all participants and reinvested with it. To withdraw this stake or any part of it to the participant wallet, use one of the withdrawal functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-wrong-contract-version">1. Wrong contract version<a class="hash-link" href="#1-wrong-contract-version" title="Direct link to heading">​</a></h3><p><strong>Issue</strong>: Wrong/outdated version of any contracts involved in DePool operations may cause various issues and hard-to-diagnose behavior.
To check contract versions, search for the addresses of DePool, DePool Helper and both proxies on <a href="http://ever.live" target="_blank" rel="noopener noreferrer">ever.live</a> and review <strong>Code hash</strong> (may be hidden under <strong>More details</strong>). Click on the value to copy it to clipboard.
It should match the following values:
DePool:
<code>14e20e304f53e6da152eb95fffc993dbd28245a775d847eed043f7c78a503885</code>
Proxies:
<code>c05938cde3cee21141caacc9e88d3b8f2a4a4bc3968cb3d455d83cd0498d4375</code>
DePool Helper:
<code>f990434c02c2b532087782a2d615292c7c241ece4a9af33f8d090c535296401d</code>
If only the Helper contract has wrong Code hash, deploying and configuring only a new Helper is enough.
If DePool or proxies have wrong Code hash, all contracts have to be redeployed, and the node reconfigured to work with the new DePool.</p><blockquote><p><strong>Note</strong>: For RustCup, contract code hash is different.</p><p> Initially the following contracts were used:</p><p><code>891d1afd26d99ee4f9def21fbd4bccffe25143e79729669573c7d792a646f4e9</code> for DePool</p><p><code>d938d7c19af7ba65342e6fc2f4c6827b7e16ce378722ce134bb461f9d62f6c76</code> for proxy</p><p>After the August 5 update the code hashes are as follows:</p><p><code>cef9fe9fed144e25e24aa671da1118244dfb2d1e316e9961522cd9b015bbba59</code> for DePool</p><p><code>b633f0b5bc420abd8cb74b03eb0960df2a91c6c123d5cb18ed7283bb26e491bd</code> for proxy</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-depool-isnt-emitting-events">2. DePool isn&#x27;t emitting events<a class="hash-link" href="#2-depool-isnt-emitting-events" title="Direct link to heading">​</a></h3><p><strong>Issue</strong>: DePool seems to be set up correctly, but is not emitting expected <a href="#using-depool-events">events</a>, for example <code>stakeSigningRequested</code>.
This can be caused by issues with the state update method.
<strong>Possible solutions:</strong></p><ol><li>Change the global timer and/or the timer call period (termporarily unavailable):<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">HelperAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> initTimer </span><span class="token string" style="color:#e3116c">&#x27;{&quot;timer&quot;:&quot;TimerAddress&quot;,&quot;period&quot;:*number*}&#x27;</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Where
<code>&lt;HelperAddress&gt;</code> – is the address of the Helper contract from step 4.2
<code>&lt;TimerAddress&gt;</code> - is the address of the global timer contract.
<code>&quot;period&quot;:*number*</code> - is the period for regular DePool contract calls via ticktock messages (in seconds).</li><li>Set up external ticktock function call through TONOS-CLI:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">HelperAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sendTicktock </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Where
<code>&lt;HelperAddress&gt;</code> – is the address of the Helper contract from step 4.2.
If necessary, run it regularly, e.g. with cron:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@hourly        </span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">tonos-cli-dir</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> tonos-cli call </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">HelperAddress</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sendTicktock </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> --abi DePoolHelper.abi.json --sign helper.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Where
<code>&lt;tonos-cli-dir&gt;</code> - directory with TONOS-CLI configuration file, <code>DePoolHelper.abi.json</code> file and <code>helper.json</code> keyfile containing DePool Helper keys.
<code>&lt;HelperAddress&gt;</code> – is the address of the Helper contract from step 4.2.</li><li>Call DePool&#x27;s ticktock function through multisig instead of Helper:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli depool </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--addr </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">depool_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ticktock </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-w </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msig_address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-s </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path_to_keys_or_seed_phrase</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>Where
<code>--addr &lt;depool_address&gt;</code> - the address of the DePool
<code>-w &lt;msig_address&gt;</code> - the address of the multisig wallet used to call DePool
<code>-s &lt;path_to_keys_or_seed_phrase&gt;</code> - either the keyfile for the wallet making the stake, or the seed phrase in quotes
All these options can be skipped, if they were previously specified in the TONOS-CLI configuration file.
1 token is always attached to this call, change is returned to sender.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-validator-script-and-election-request-issues">3. Validator script and election request issues<a class="hash-link" href="#3-validator-script-and-election-request-issues" title="Direct link to heading">​</a></h3><p><strong>Issue</strong>: DePool isn&#x27;t receiving election request from validator script and/or isn&#x27;t passing it on to the Elector.
This can be caused by DePool setup errors, low balance on some of the contracts involved, or issues with the script or node setup.
<strong>Possible solutions and diagnostic methods</strong>:</p><ol><li>If the DePool fails to accumulate a suitable stake, or malfunctions in any other manner, the election request will not pass through to the Elector. Always make sure that the full DePool setup procedure described in this document is completed, and that DePool contract itself operates correctly, i.e. enters waiting request step and emits <code>stakeSigningRequested</code> <a href="#using-depool-events">event</a>, when encountering problems with election participation.</li><li>Check balance of all contracts and top up if any of them have run out of funds (see <a href="#11-maintain-positive-balance-on-depool-and-supplementary-contracts">section 11</a> for details).</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-c-node-1">For C++ Node<a class="hash-link" href="#for-c-node-1" title="Direct link to heading">​</a></h4><ol><li>Check that the DePool address is specified in the in the <code>~/ton-keys/depool.addr</code> file in your validator node files and matches your current DePool address.</li><li>Check that the validator wallet address is specified in the <code>~/ton-keys/$(hostname -s).addr</code> file according to the <a href="https://docs.ton.dev/86757ecb2/p/708260-run-validator/t/906cb8" target="_blank" rel="noopener noreferrer">node setup procedure</a>.</li><li>Check that the validator wallet keys are saved to the <code>~/ton-keys/msig.keys.json</code> file according to the <a href="https://docs.ton.dev/86757ecb2/p/708260-run-validator/t/05caf5" target="_blank" rel="noopener noreferrer">node setup procedure</a>.</li><li>Check validator script output log (<code>/var/ton-work/validator_depool.log</code> file if script is set up according to the given example). They may help identify the cause of the issue.</li><li>Rerun the command to send election request manually. It can be found in the validator script output log (<code>/var/ton-work/validator_depool.log</code> file if set up according to the given example) and used as is.
Example:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tonos-cli call -1:fd05bd9be4e2d3ee7789d1fbc5811e0bd85cf1d14968028fd46a9e1c7b1066cc submitTransaction </span><span class="token string" style="color:#e3116c">&#x27;{&quot;dest&quot;:&quot;0:10fdf438953430949ca33147f792b9fd9002e7979e50c94547c771c51fb643b9&quot;,&quot;value&quot;:&quot;1000000000&quot;,&quot;bounce&quot;:true,&quot;allBalance&quot;:false,&quot;payload&quot;:&quot;te6cckEBAgEAmQABqE5zdEsAAAAAXz7BoZOzdxrAyZXWwptpyrV5ZV1EkLrRdSsfm0KFiFpOuB4XXz7FVAADAACIUt3MiEtCLfPfKEWoVz2sTA9yS/Sl8N88ZkQ8CB1c3QEAgNnX/KhAEKVKe/MO4ArCIMLXM1kgYu34Ujp9dSq2lkSo8vfj0s+yySs6Ac2ufavtXO4DLZ1afugAVwUjvKvI3Agoizgf&quot;}&#x27;</span><span class="token plain"> --abi /validation/configs/SafeMultisigWallet.abi.json --sign /keys/msig.keys.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Run validator script with verbose logs to get more diagnostic information:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -x ./validator_depool.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-rust-node-1">For Rust Node<a class="hash-link" href="#for-rust-node-1" title="Direct link to heading">​</a></h4><ol><li>Check that the DePool address is specified in the in the <code>/ton-node/configs/depool.addr</code> file in your validator node files and matches your current DePool address.</li><li>Check that the validator wallet address is specified in the <code>/ton-node/configs/${VALIDATOR_NAME}.addr</code> file</li><li>Check that the validator wallet keys are saved to the <code>/ton-node/configs/keys/msig.keys.json</code> file</li><li>Refer to <a href="https://github.com/tonlabs/rustnet.ton.dev#troubleshooting" target="_blank" rel="noopener noreferrer">this document</a> for Rust node troubleshooting.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-depool-function-terminates-with-error-in-tonos-cli">4. DePool function terminates with error in TONOS-CLI<a class="hash-link" href="#4-depool-function-terminates-with-error-in-tonos-cli" title="Direct link to heading">​</a></h3><p>In TONOS-CLI output it looks like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message: Contract execution was terminated with error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message_processing_state: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;account_address&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0:3187b4d738d69776948ca8543cb7d250c042d7aad1e0aa244d247531590b9147&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;config_server&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;net.ton.dev&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;exit_code&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">140</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;function_name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constructor&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;original_error&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1006</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;core_version&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.27.0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;block_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;20c8932bc6c7baa90c2d099595b432607355b79d95293061dc6feec392675975&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;block_time&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Thu, 19 Nov 2020 13:24:37 +0300 (1605781477)&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;expiration_time&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Thu, 19 Nov 2020 13:24:35 +0300 (1605781475)&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;message_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eae70ebcf84fd9ebcffc544908ca637d9a46a8bdffdab24db6749d003608969e&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;sending_time&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Thu, 19 Nov 2020 13:23:35 +0300 (1605781415)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Message was not delivered within the specified timeout&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;message_processing_state&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;source&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;node&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The error code is indicated in the <code>&quot;exit_code&quot;</code> line.
Possible error codes and their meanings:
<code>101</code> - message sender is not owner (message public key is wrong). Please check your key file or seed phrase.
<code>108</code> - function cannot be called by external message.
<code>113</code> - message sender is not validator wallet.
<code>114</code> - DePool is <a href="#14-optional-close-depool">closed</a>.
<code>116</code> - participant with such address does not exist.
<code>129</code> - incorrectly defined stake parameters during DePool deployment (<code>minStake</code> &lt; 1 token or <code>minStake</code> &gt; <code>validatorAssurance</code>). Please check your parameters in <a href="#61-deploy-depool-contract-to-the-basechain">deploy message</a>.
<code>130</code> - DePool deployment isn&#x27;t signed with public key. Please check your key file or seed phrase.
<code>133</code> - validator address passed to constructor is not of add_std type. Please check your parameters in <a href="#61-deploy-depool-contract-to-the-basechain">deploy message</a>.
<code>138</code> - Incorrect participant reward fraction during DePool deployment (<code>participantRewardFraction</code> ≤ 0 or  ≥ 100). Please check your parameters in <a href="#61-deploy-depool-contract-to-the-basechain">deploy message</a>.
<code>141</code> - incorrectly specified proxy code during DePool deployment. Please check your parameters in <a href="#61-deploy-depool-contract-to-the-basechain">deploy message</a>.
<code>142</code> - DePool is being deployed to the wrong shardchain (workchain id ≠ 0). Please check your parameters in <a href="#61-deploy-depool-contract-to-the-basechain">deploy message</a>.
<code>143</code> - new validator reward fraction is greater than old.
<code>144</code> - new validator reward fraction is zero.
<code>146</code> - insufficient <a href="#depool-balance">DePool balance</a>.
<code>147</code> - validator wallet address is zero.
<code>149</code> - incorrectly specified minimal stake and validator assurance.
Incorrect DePool function call by another contract:
<code>107</code> - message sender is not proxy contract.
<code>120</code> - message sender is not DePool (this is not a self call).
<code>125</code> - invalid confirmation from elector (invalid round step).
<code>126</code> - invalid confirmation from elector (invalid query ID).
<code>127</code> - invalid confirmation from elector (sender is not elector).
<code>148</code> - message sender is not one of the proxies.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/everscale-org/docs/edit/main/.build/website/../../src/validate/depools/getting-started.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-07-26T00:16:13.000Z">Jul 26, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/validate/depools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DePools</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/validate/depools/faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#procedure" class="table-of-contents__link toc-highlight">Procedure</a><ul><li><a href="#1-set-up-node-and-deploy-validator-wallet" class="table-of-contents__link toc-highlight">1. Set Up Node and Deploy Validator Wallet</a></li><li><a href="#3-generate-deployment-keys" class="table-of-contents__link toc-highlight">3. Generate Deployment Keys</a></li><li><a href="#4-calculate-contract-addresses" class="table-of-contents__link toc-highlight">4. Calculate Contract Addresses</a></li><li><a href="#5-send-coins-to-the-calculated-addresses" class="table-of-contents__link toc-highlight">5. Send Coins to the Calculated Addresses</a></li><li><a href="#7-configure-depool-state-update-method" class="table-of-contents__link toc-highlight">7. Configure DePool State Update method</a></li><li><a href="#8-make-stakes" class="table-of-contents__link toc-highlight">8. Make Stakes</a></li><li><a href="#9-check--donors-and-stakes-in-the-depool" class="table-of-contents__link toc-highlight">9. Check  Donors and Stakes in the DePool</a></li><li><a href="#10-set-up-validator-script" class="table-of-contents__link toc-highlight">10. Set Up Validator Script</a></li><li><a href="#11-maintain-positive-balance-on-depool-and-supplementary-contracts" class="table-of-contents__link toc-highlight">11. Maintain Positive Balance on DePool and Supplementary Contracts</a></li><li><a href="#12-check-depool-status-in-the-elections" class="table-of-contents__link toc-highlight">12. Check DePool Status in the Elections</a></li><li><a href="#13-optional-adjust-validator-and-participant-reward-fraction" class="table-of-contents__link toc-highlight">13. (Optional) Adjust validator and participant reward fraction</a></li><li><a href="#14-optional-close-depool" class="table-of-contents__link toc-highlight">14. (Optional) Close DePool</a></li></ul></li><li><a href="#rewards-distribution" class="table-of-contents__link toc-highlight">Rewards Distribution</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#1-wrong-contract-version" class="table-of-contents__link toc-highlight">1. Wrong contract version</a></li><li><a href="#2-depool-isnt-emitting-events" class="table-of-contents__link toc-highlight">2. DePool isn&#39;t emitting events</a></li><li><a href="#3-validator-script-and-election-request-issues" class="table-of-contents__link toc-highlight">3. Validator script and election request issues</a></li><li><a href="#4-depool-function-terminates-with-error-in-tonos-cli" class="table-of-contents__link toc-highlight">4. DePool function terminates with error in TONOS-CLI</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale-org.github.io/Calendar/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Event Calendar<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/everscale-org/job/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs and Vacancy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://mitja.gitbook.io/everscale-white-paper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://mitja.gitbook.io/everscale-lite-paper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lite Paper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/Everscale_community/search?query=Weekly%20Meetup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Weekly Meetup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://everscale.network/about/brand" target="_blank" rel="noopener noreferrer" class="footer__link-item">Visual Brand Identity<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gov.gramkit.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subgovernances<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://everscale.network/developers/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/EverscaleGuild/bounties/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounties<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleSmartContracts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart Contracts Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_validators" target="_blank" rel="noopener noreferrer" class="footer__link-item">Everscale Validators Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverscaleIncubator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Incubator Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/everscaledebots" target="_blank" rel="noopener noreferrer" class="footer__link-item">DeBots Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/ever_sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/everscale" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Workshop</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/develop/smart-contract/getting-started/">Tutorial</a></li><li class="footer__item"><a href="https://youtu.be/XKMnroPWXek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart contract-architecture<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/YBIaFeaksMY" target="_blank" rel="noopener noreferrer" class="footer__link-item">Smart-contract development<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/playlist?list=PLPj4C8ti8UaSPAP6afsy0wQ53lihBT5l1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://youtu.be/vFAatJO6cBM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Development of DeBots<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/EverVoice" target="_blank" rel="noopener noreferrer" class="footer__link-item">Voice Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tonlabs/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample smart-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/sdk-samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tonlabs.gitbook.io/appkit-js/" target="_blank" rel="noopener noreferrer" class="footer__link-item">JS Application Kit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/TON-Solidity-Compiler/blob/master/API.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Solidity API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.ton.dev/86757ecb2/p/40ba94-abi-specification-v2" target="_blank" rel="noopener noreferrer" class="footer__link-item">ABI Specification<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/True-NFT" target="_blank" rel="noopener noreferrer" class="footer__link-item">NFT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/tonlabs/tonos-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">CLI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tonlabs.gitbook.io/ton-sdk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020—2022
 <a href="https://everscale.network/">Everscale</a> All rights reserved
  <a href="https://t.me/everscale">Touch</a>
 <br>
 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
    <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
 </a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.fe471d0f.js"></script>
<script src="/assets/js/main.f613e946.js"></script>
</body>
</html>